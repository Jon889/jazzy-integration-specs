<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Alamofire  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
  </head>
  <body>
    <a title="Alamofire  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">Alamofire Docs</a> (85% documented)</p>
        <p class="header-right"><a href="https://github.com/Alamofire/Alamofire"><img src="img/gh.png"/>View on GitHub</a></p>
        <p class="header-right"><a href="dash-feed://http%3A%2F%2Fstatic%2Erealm%2Eio%2Fjazzy_demo%2FAlamofire%2Fdocsets%2FAlamofire%2Exml"><img src="img/dash.png"/>Install in Dash</a></p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">Alamofire Reference</a>
        <img id="carat" src="img/carat.png" />
        Alamofire  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/Manager.html">Manager</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Manager/SessionDelegate.html">– SessionDelegate</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Manager.html#/s:OC9Alamofire7Manager31MultipartFormDataEncodingResult">– MultipartFormDataEncodingResult</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/MultipartFormData.html">MultipartFormData</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/NetworkReachabilityManager.html">NetworkReachabilityManager</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/NetworkReachabilityManager.html#/s:OC9Alamofire26NetworkReachabilityManager25NetworkReachabilityStatus">– NetworkReachabilityStatus</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/NetworkReachabilityManager.html#/s:OC9Alamofire26NetworkReachabilityManager14ConnectionType">– ConnectionType</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Request.html">Request</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Request/TaskDelegate.html">– TaskDelegate</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Request.html#/s:OC9Alamofire7Request16ValidationResult">– ValidationResult</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ServerTrustPolicyManager.html">ServerTrustPolicyManager</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Enums.html">Enums</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Enums.html#/s:O9Alamofire6Method">Method</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/ParameterEncoding.html">ParameterEncoding</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/Result.html">Result</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/ServerTrustPolicy.html">ServerTrustPolicy</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Extensions.html#/c:objc(cs)NSURLRequest">NSURLRequest</a>
              </li>
              <li class="nav-group-task">
                <a href="Extensions.html#/s:SS">String</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Functions.html">Functions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Functions.html#/s:ZF9Alamofireoi2eeFTOCS_26NetworkReachabilityManager25NetworkReachabilityStatusS1__Sb">==(_:_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F9Alamofire8downloadFTOS_6MethodPS_20URLStringConvertible_10parametersGSqGVs10DictionarySSPs9AnyObject___8encodingOS_17ParameterEncoding7headersGSqGS2_SSSS__11destinationFTCSo5NSURLCSo17NSHTTPURLResponse_S5__CS_7Request">download(_:_:parameters:encoding:headers:destination:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F9Alamofire8downloadFTPS_21URLRequestConvertible_11destinationFTCSo5NSURLCSo17NSHTTPURLResponse_S1__CS_7Request">download(_:destination:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F9Alamofire8downloadFT10resumeDataCSo6NSData11destinationFTCSo5NSURLCSo17NSHTTPURLResponse_S1__CS_7Request">download(resumeData:destination:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F9Alamofire7requestFPS_21URLRequestConvertible_CS_7Request">request(_:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F9Alamofire7requestFTOS_6MethodPS_20URLStringConvertible_10parametersGSqGVs10DictionarySSPs9AnyObject___8encodingOS_17ParameterEncoding7headersGSqGS2_SSSS___CS_7Request">request(_:_:parameters:encoding:headers:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F9Alamofire6uploadFTOS_6MethodPS_20URLStringConvertible_7headersGSqGVs10DictionarySSSS__4dataCSo6NSData_CS_7Request">upload(_:_:headers:data:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F9Alamofire6uploadFTOS_6MethodPS_20URLStringConvertible_7headersGSqGVs10DictionarySSSS__4fileCSo5NSURL_CS_7Request">upload(_:_:headers:file:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F9Alamofire6uploadFTOS_6MethodPS_20URLStringConvertible_7headersGSqGVs10DictionarySSSS__17multipartFormDataFCS_17MultipartFormDataT_23encodingMemoryThresholdVs6UInt6418encodingCompletionGSqFOCS_7Manager31MultipartFormDataEncodingResultT___T_">upload(_:_:headers:multipartFormData:encodingMemoryThreshold:encodingCompletion:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F9Alamofire6uploadFTOS_6MethodPS_20URLStringConvertible_7headersGSqGVs10DictionarySSSS__6streamCSo13NSInputStream_CS_7Request">upload(_:_:headers:stream:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F9Alamofire6uploadFTPS_21URLRequestConvertible_4dataCSo6NSData_CS_7Request">upload(_:data:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F9Alamofire6uploadFTPS_21URLRequestConvertible_4fileCSo5NSURL_CS_7Request">upload(_:file:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F9Alamofire6uploadFTPS_21URLRequestConvertible_17multipartFormDataFCS_17MultipartFormDataT_23encodingMemoryThresholdVs6UInt6418encodingCompletionGSqFOCS_7Manager31MultipartFormDataEncodingResultT___T_">upload(_:multipartFormData:encodingMemoryThreshold:encodingCompletion:)</a>
              </li>
              <li class="nav-group-task">
                <a href="Functions.html#/s:F9Alamofire6uploadFTPS_21URLRequestConvertible_6streamCSo13NSInputStream_CS_7Request">upload(_:stream:)</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/ResponseSerializerType.html">ResponseSerializerType</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/URLRequestConvertible.html">URLRequestConvertible</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/URLStringConvertible.html">URLStringConvertible</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Structs.html">Structs</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/Error.html">Error</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Error.html#/s:OV9Alamofire5Error4Code">– Code</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Notifications.html">Notifications</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Notifications/Task.html">– Task</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Response.html">Response</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ResponseSerializer.html">ResponseSerializer</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Timeline.html">Timeline</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Typealiases.html">Typealiases</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Typealiases.html#/s:C9Alamofire7Request23DownloadFileDestination">DownloadFileDestination</a>
              </li>
              <li class="nav-group-task">
                <a href="Typealiases.html#/s:C9Alamofire7Request10Validation">Validation</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <p><img src="https://raw.githubusercontent.com/Alamofire/Alamofire/assets/alamofire.png" alt="Alamofire: Elegant Networking in Swift"></p>

<p><a href="https://travis-ci.org/Alamofire/Alamofire"><img src="https://travis-ci.org/Alamofire/Alamofire.svg" alt="Build Status"></a>
<a href="https://img.shields.io/cocoapods/v/Alamofire.svg"><img src="https://img.shields.io/cocoapods/v/Alamofire.svg" alt="CocoaPods Compatible"></a>
<a href="https://github.com/Carthage/Carthage"><img src="https://img.shields.io/badge/Carthage-compatible-4BC51D.svg?style=flat" alt="Carthage Compatible"></a>
<a href="http://cocoadocs.org/docsets/Alamofire"><img src="https://img.shields.io/cocoapods/p/Alamofire.svg?style=flat" alt="Platform"></a>
<a href="http://twitter.com/AlamofireSF"><img src="https://img.shields.io/badge/twitter-@AlamofireSF-blue.svg?style=flat" alt="Twitter"></a></p>

<p>Alamofire is an HTTP networking library written in Swift.</p>
<a href='#features' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='features'>Features</h2>

<ul>
<li>[x] Chainable Request / Response methods</li>
<li>[x] URL / JSON / plist Parameter Encoding</li>
<li>[x] Upload File / Data / Stream / MultipartFormData</li>
<li>[x] Download using Request or Resume data</li>
<li>[x] Authentication with NSURLCredential</li>
<li>[x] HTTP Response Validation</li>
<li>[x] TLS Certificate and Public Key Pinning</li>
<li>[x] Progress Closure &amp; NSProgress</li>
<li>[x] cURL Debug Output</li>
<li>[x] Comprehensive Unit Test Coverage</li>
<li>[x] <a href="http://cocoadocs.org/docsets/Alamofire">Complete Documentation</a></li>
</ul>
<a href='#component-libraries' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='component-libraries'>Component Libraries</h2>

<p>In order to keep Alamofire focused specifically on core networking implementations, additional component libraries have been created by the <a href="https://github.com/Alamofire/Foundation">Alamofire Software Foundation</a> to bring additional functionality to the Alamofire ecosystem.</p>

<ul>
<li><a href="https://github.com/Alamofire/AlamofireImage">AlamofireImage</a> - An image library including image response serializers, <code>UIImage</code> and <code>UIImageView</code> extensions, custom image filters, an auto-purging in-memory cache and a priority-based image downloading system.</li>
<li><a href="https://github.com/Alamofire/AlamofireNetworkActivityIndicator">AlamofireNetworkActivityIndicator</a> - Controls the visibility of the network activity indicator on iOS using Alamofire. It contains configurable delay timers to help mitigate flicker and can support <code>NSURLSession</code> instances not managed by Alamofire.</li>
</ul>
<a href='#requirements' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='requirements'>Requirements</h2>

<ul>
<li>iOS 8.0+ / Mac OS X 10.9+ / tvOS 9.0+ / watchOS 2.0+</li>
<li>Xcode 7.2+</li>
</ul>
<a href='#migration-guides' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='migration-guides'>Migration Guides</h2>

<ul>
<li><a href="https://github.com/Alamofire/Alamofire/blob/master/Documentation/Alamofire%203.0%20Migration%20Guide.md">Alamofire 3.0 Migration Guide</a></li>
<li><a href="https://github.com/Alamofire/Alamofire/blob/master/Documentation/Alamofire%202.0%20Migration%20Guide.md">Alamofire 2.0 Migration Guide</a></li>
</ul>
<a href='#communication' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='communication'>Communication</h2>

<ul>
<li>If you <strong>need help</strong>, use <a href="http://stackoverflow.com/questions/tagged/alamofire">Stack Overflow</a>. (Tag &lsquo;alamofire&rsquo;)</li>
<li>If you&rsquo;d like to <strong>ask a general question</strong>, use <a href="http://stackoverflow.com/questions/tagged/alamofire">Stack Overflow</a>.</li>
<li>If you <strong>found a bug</strong>, open an issue.</li>
<li>If you <strong>have a feature request</strong>, open an issue.</li>
<li>If you <strong>want to contribute</strong>, submit a pull request.</li>
</ul>
<a href='#installation' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='installation'>Installation</h2>

<blockquote>
<p><strong>Embedded frameworks require a minimum deployment target of iOS 8 or OS X Mavericks (10.9).</strong></p>

<p>Alamofire is no longer supported on iOS 7 due to the lack of support for frameworks. Without frameworks, running Travis-CI against iOS 7 would require a second duplicated test target. The separate test suite would need to import all the Swift files and the tests would need to be duplicated and re-written. This split would be too difficult to maintain to ensure the highest possible quality of the Alamofire ecosystem.</p>
</blockquote>
<a href='#cocoapods' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='cocoapods'>CocoaPods</h3>

<p><a href="http://cocoapods.org">CocoaPods</a> is a dependency manager for Cocoa projects. You can install it with the following command:</p>
<pre class="highlight shell"><code><span class="gp">$ </span>gem install cocoapods
</code></pre>

<blockquote>
<p>CocoaPods 0.39.0+ is required to build Alamofire 3.0.0+.</p>
</blockquote>

<p>To integrate Alamofire into your Xcode project using CocoaPods, specify it in your <code>Podfile</code>:</p>
<pre class="highlight ruby"><code><span class="n">source</span> <span class="s1">'https://github.com/CocoaPods/Specs.git'</span>
<span class="n">platform</span> <span class="ss">:ios</span><span class="p">,</span> <span class="s1">'8.0'</span>
<span class="n">use_frameworks!</span>

<span class="n">pod</span> <span class="s1">'Alamofire'</span><span class="p">,</span> <span class="s1">'~&gt; 3.0'</span>
</code></pre>

<p>Then, run the following command:</p>
<pre class="highlight shell"><code><span class="gp">$ </span>pod install
</code></pre>
<a href='#carthage' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='carthage'>Carthage</h3>

<p><a href="https://github.com/Carthage/Carthage">Carthage</a> is a decentralized dependency manager that builds your dependencies and provides you with binary frameworks.</p>

<p>You can install Carthage with <a href="http://brew.sh/">Homebrew</a> using the following command:</p>
<pre class="highlight shell"><code><span class="gp">$ </span>brew update
<span class="gp">$ </span>brew install carthage
</code></pre>

<p>To integrate Alamofire into your Xcode project using Carthage, specify it in your <code>Cartfile</code>:</p>
<pre class="highlight plaintext"><code>github "Alamofire/Alamofire" ~&gt; 3.0
</code></pre>

<p>Run <code>carthage update</code> to build the framework and drag the built <code>Alamofire.framework</code> into your Xcode project.</p>
<a href='#manually' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='manually'>Manually</h3>

<p>If you prefer not to use either of the aforementioned dependency managers, you can integrate Alamofire into your project manually.</p>
<a href='#embedded-framework' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='embedded-framework'>Embedded Framework</h4>

<ul>
<li>Open up Terminal, <code>cd</code> into your top-level project directory, and run the following command <q>if</q> your project is not initialized as a git repository:</li>
</ul>
<pre class="highlight shell"><code><span class="gp">$ </span>git init
</code></pre>

<ul>
<li>Add Alamofire as a git <a href="http://git-scm.com/docs/git-submodule">submodule</a> by running the following command:</li>
</ul>
<pre class="highlight shell"><code><span class="gp">$ </span>git submodule add https://github.com/Alamofire/Alamofire.git
</code></pre>

<ul>
<li><p>Open the new <code>Alamofire</code> folder, and drag the <code>Alamofire.xcodeproj</code> into the Project Navigator of your application&rsquo;s Xcode project.</p>

<blockquote>
<p>It should appear nested underneath your application&rsquo;s blue project icon. Whether it is above or below all the other Xcode groups does not matter.</p>
</blockquote></li>
<li><p>Select the <code>Alamofire.xcodeproj</code> in the Project Navigator and verify the deployment target matches that of your application target.</p></li>
<li><p>Next, select your application project in the Project Navigator (blue project icon) to navigate to the target configuration window and select the application target under the <q>Targets</q> heading in the sidebar.</p></li>
<li><p>In the tab bar at the top of that window, open the <q>General</q> panel.</p></li>
<li><p>Click on the <code>+</code> button under the <q>Embedded Binaries</q> section.</p></li>
<li><p>You will see two different <code>Alamofire.xcodeproj</code> folders each with two different versions of the <code>Alamofire.framework</code> nested inside a <code>Products</code> folder.</p>

<blockquote>
<p>It does not matter which <code>Products</code> folder you choose from, but it does matter whether you choose the top or bottom <code>Alamofire.framework</code>. </p>
</blockquote></li>
<li><p>Select the top <code>Alamofire.framework</code> for iOS and the bottom one for OS X.</p>

<blockquote>
<p>You can verify which one you selected by inspecting the build log for your project. The build target for <code>Alamofire</code> will be listed as either <code>Alamofire iOS</code> or <code>Alamofire OSX</code>.</p>
</blockquote></li>
<li><p>And that&rsquo;s it!</p></li>
</ul>

<blockquote>
<p>The <code>Alamofire.framework</code> is automagically added as a target dependency, linked framework and embedded framework in a copy files build phase which is all you need to build on the simulator and a device.</p>
</blockquote>

<hr>
<a href='#usage' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='usage'>Usage</h2>
<a href='#making-a-request' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='making-a-request'>Making a Request</h3>
<pre class="highlight swift"><code><span class="kd">import</span> <span class="kt">Alamofire</span>

<span class="kt">Alamofire</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="o">.</span><span class="kt">GET</span><span class="p">,</span> <span class="s">"https://httpbin.org/get"</span><span class="p">)</span>
</code></pre>
<a href='#response-handling' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='response-handling'>Response Handling</h3>
<pre class="highlight swift"><code><span class="kt">Alamofire</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="o">.</span><span class="kt">GET</span><span class="p">,</span> <span class="s">"https://httpbin.org/get"</span><span class="p">,</span> <span class="nv">parameters</span><span class="p">:</span> <span class="p">[</span><span class="s">"foo"</span><span class="p">:</span> <span class="s">"bar"</span><span class="p">])</span>
         <span class="o">.</span><span class="n">responseJSON</span> <span class="p">{</span> <span class="n">response</span> <span class="k">in</span>
             <span class="nf">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">request</span><span class="p">)</span>  <span class="c1">// original URL request</span>
             <span class="nf">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">response</span><span class="p">)</span> <span class="c1">// URL response</span>
             <span class="nf">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>     <span class="c1">// server data</span>
             <span class="nf">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">result</span><span class="p">)</span>   <span class="c1">// result of response serialization</span>

             <span class="k">if</span> <span class="k">let</span> <span class="nv">JSON</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">value</span> <span class="p">{</span>
                 <span class="nf">print</span><span class="p">(</span><span class="s">"JSON: </span><span class="se">\(</span><span class="kt">JSON</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
             <span class="p">}</span>
         <span class="p">}</span>
</code></pre>

<blockquote>
<p>Networking in Alamofire is done <em>asynchronously</em>. Asynchronous programming may be a source of frustration to programmers unfamiliar with the concept, but there are <a href="https://developer.apple.com/library/ios/qa/qa1693/_index.html">very good reasons</a> for doing it this way.</p>

<p>Rather than blocking execution to wait for a response from the server, a <a href="http://en.wikipedia.org/wiki/Callback_%28computer_programming%29">callback</a> is specified to handle the response once it&rsquo;s received. The result of a request is only available inside the scope of a response handler. Any execution contingent on the response or data received from the server must be done within a handler.</p>
</blockquote>
<a href='#response-serialization' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='response-serialization'>Response Serialization</h3>

<p><strong>Built-in Response Methods</strong></p>

<ul>
<li><code>response()</code></li>
<li><code>responseData()</code></li>
<li><code>responseString(encoding: NSStringEncoding)</code></li>
<li><code>responseJSON(options: NSJSONReadingOptions)</code></li>
<li><code>responsePropertyList(options: NSPropertyListReadOptions)</code></li>
</ul>
<a href='#response-handler' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='response-handler'>Response Handler</h4>
<pre class="highlight swift"><code><span class="kt">Alamofire</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="o">.</span><span class="kt">GET</span><span class="p">,</span> <span class="s">"https://httpbin.org/get"</span><span class="p">,</span> <span class="nv">parameters</span><span class="p">:</span> <span class="p">[</span><span class="s">"foo"</span><span class="p">:</span> <span class="s">"bar"</span><span class="p">])</span>
         <span class="o">.</span><span class="n">response</span> <span class="p">{</span> <span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">error</span> <span class="k">in</span>
             <span class="nf">print</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
             <span class="nf">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
             <span class="nf">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
             <span class="nf">print</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
          <span class="p">}</span>
</code></pre>

<blockquote>
<p>The <code>response</code> serializer does NOT evaluate any of the response data. It merely forwards on all the information directly from the URL session delegate. We strongly encourage you to leverage the other response serializers taking advantage of <code>Response</code> and <code>Result</code> types.</p>
</blockquote>
<a href='#response-data-handler' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='response-data-handler'>Response Data Handler</h4>
<pre class="highlight swift"><code><span class="kt">Alamofire</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="o">.</span><span class="kt">GET</span><span class="p">,</span> <span class="s">"https://httpbin.org/get"</span><span class="p">,</span> <span class="nv">parameters</span><span class="p">:</span> <span class="p">[</span><span class="s">"foo"</span><span class="p">:</span> <span class="s">"bar"</span><span class="p">])</span>
         <span class="o">.</span><span class="n">responseData</span> <span class="p">{</span> <span class="n">response</span> <span class="k">in</span>
             <span class="nf">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">request</span><span class="p">)</span>
             <span class="nf">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">response</span><span class="p">)</span>
             <span class="nf">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">result</span><span class="p">)</span>
          <span class="p">}</span>
</code></pre>
<a href='#response-string-handler' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='response-string-handler'>Response String Handler</h4>
<pre class="highlight swift"><code><span class="kt">Alamofire</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="o">.</span><span class="kt">GET</span><span class="p">,</span> <span class="s">"https://httpbin.org/get"</span><span class="p">)</span>
         <span class="o">.</span><span class="n">responseString</span> <span class="p">{</span> <span class="n">response</span> <span class="k">in</span>
             <span class="nf">print</span><span class="p">(</span><span class="s">"Success: </span><span class="se">\(</span><span class="n">response</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">isSuccess</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
             <span class="nf">print</span><span class="p">(</span><span class="s">"Response String: </span><span class="se">\(</span><span class="n">response</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">value</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
         <span class="p">}</span>
</code></pre>
<a href='#response-json-handler' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='response-json-handler'>Response JSON Handler</h4>
<pre class="highlight swift"><code><span class="kt">Alamofire</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="o">.</span><span class="kt">GET</span><span class="p">,</span> <span class="s">"https://httpbin.org/get"</span><span class="p">)</span>
         <span class="o">.</span><span class="n">responseJSON</span> <span class="p">{</span> <span class="n">response</span> <span class="k">in</span>
             <span class="nf">debugPrint</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
         <span class="p">}</span>
</code></pre>
<a href='#chained-response-handlers' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='chained-response-handlers'>Chained Response Handlers</h4>

<p>Response handlers can even be chained:</p>
<pre class="highlight swift"><code><span class="kt">Alamofire</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="o">.</span><span class="kt">GET</span><span class="p">,</span> <span class="s">"https://httpbin.org/get"</span><span class="p">)</span>
         <span class="o">.</span><span class="n">responseString</span> <span class="p">{</span> <span class="n">response</span> <span class="k">in</span>
             <span class="nf">print</span><span class="p">(</span><span class="s">"Response String: </span><span class="se">\(</span><span class="n">response</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">value</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
         <span class="p">}</span>
         <span class="o">.</span><span class="n">responseJSON</span> <span class="p">{</span> <span class="n">response</span> <span class="k">in</span>
             <span class="nf">print</span><span class="p">(</span><span class="s">"Response JSON: </span><span class="se">\(</span><span class="n">response</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">value</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
         <span class="p">}</span>
</code></pre>
<a href='#http-methods' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='http-methods'>HTTP Methods</h3>

<p><code>Alamofire.Method</code> lists the HTTP methods defined in <a href="http://tools.ietf.org/html/rfc7231#section-4.3">RFC 7231 §4.3</a>:</p>
<pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">enum</span> <span class="kt">Method</span><span class="p">:</span> <span class="kt">String</span> <span class="p">{</span>
    <span class="k">case</span> <span class="kt">OPTIONS</span><span class="p">,</span> <span class="kt">GET</span><span class="p">,</span> <span class="kt">HEAD</span><span class="p">,</span> <span class="kt">POST</span><span class="p">,</span> <span class="kt">PUT</span><span class="p">,</span> <span class="kt">PATCH</span><span class="p">,</span> <span class="kt">DELETE</span><span class="p">,</span> <span class="kt">TRACE</span><span class="p">,</span> <span class="kt">CONNECT</span>
<span class="p">}</span>
</code></pre>

<p>These values can be passed as the first argument of the <code>Alamofire.request</code> method:</p>
<pre class="highlight swift"><code><span class="kt">Alamofire</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="o">.</span><span class="kt">POST</span><span class="p">,</span> <span class="s">"https://httpbin.org/post"</span><span class="p">)</span>

<span class="kt">Alamofire</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="o">.</span><span class="kt">PUT</span><span class="p">,</span> <span class="s">"https://httpbin.org/put"</span><span class="p">)</span>

<span class="kt">Alamofire</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="o">.</span><span class="kt">DELETE</span><span class="p">,</span> <span class="s">"https://httpbin.org/delete"</span><span class="p">)</span>
</code></pre>
<a href='#parameters' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='parameters'>Parameters</h3>
<a href='#get-request-with-url-encoded-parameters' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='get-request-with-url-encoded-parameters'>GET Request With URL-Encoded Parameters</h4>
<pre class="highlight swift"><code><span class="kt">Alamofire</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="o">.</span><span class="kt">GET</span><span class="p">,</span> <span class="s">"https://httpbin.org/get"</span><span class="p">,</span> <span class="nv">parameters</span><span class="p">:</span> <span class="p">[</span><span class="s">"foo"</span><span class="p">:</span> <span class="s">"bar"</span><span class="p">])</span>
<span class="c1">// https://httpbin.org/get?foo=bar</span>
</code></pre>
<a href='#post-request-with-url-encoded-parameters' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='post-request-with-url-encoded-parameters'>POST Request With URL-Encoded Parameters</h4>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">parameters</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s">"foo"</span><span class="p">:</span> <span class="s">"bar"</span><span class="p">,</span>
    <span class="s">"baz"</span><span class="p">:</span> <span class="p">[</span><span class="s">"a"</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
    <span class="s">"qux"</span><span class="p">:</span> <span class="p">[</span>
        <span class="s">"x"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s">"y"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="s">"z"</span><span class="p">:</span> <span class="mi">3</span>
    <span class="p">]</span>
<span class="p">]</span>

<span class="kt">Alamofire</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="o">.</span><span class="kt">POST</span><span class="p">,</span> <span class="s">"https://httpbin.org/post"</span><span class="p">,</span> <span class="nv">parameters</span><span class="p">:</span> <span class="n">parameters</span><span class="p">)</span>
<span class="c1">// HTTP body: foo=bar&amp;baz[]=a&amp;baz[]=1&amp;qux[x]=1&amp;qux[y]=2&amp;qux[z]=3</span>
</code></pre>
<a href='#parameter-encoding' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='parameter-encoding'>Parameter Encoding</h3>

<p>Parameters can also be encoded as JSON, Property List, or any custom format, using the <code>ParameterEncoding</code> enum:</p>
<pre class="highlight swift"><code><span class="kd">enum</span> <span class="kt">ParameterEncoding</span> <span class="p">{</span>
    <span class="k">case</span> <span class="kt">URL</span>
    <span class="k">case</span> <span class="kt">URLEncodedInURL</span>
    <span class="k">case</span> <span class="kt">JSON</span>
    <span class="k">case</span> <span class="kt">PropertyList</span><span class="p">(</span><span class="nv">format</span><span class="p">:</span> <span class="kt">NSPropertyListFormat</span><span class="p">,</span> <span class="nv">options</span><span class="p">:</span> <span class="kt">NSPropertyListWriteOptions</span><span class="p">)</span>
    <span class="k">case</span> <span class="kt">Custom</span><span class="p">((</span><span class="kt">URLRequestConvertible</span><span class="p">,</span> <span class="p">[</span><span class="kt">String</span><span class="p">:</span> <span class="kt">AnyObject</span><span class="p">]?)</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="kt">NSMutableURLRequest</span><span class="p">,</span> <span class="kt">NSError</span><span class="p">?))</span>

    <span class="kd">func</span> <span class="nf">encode</span><span class="p">(</span><span class="nv">request</span><span class="p">:</span> <span class="kt">NSURLRequest</span><span class="p">,</span> <span class="nv">parameters</span><span class="p">:</span> <span class="p">[</span><span class="kt">String</span><span class="p">:</span> <span class="kt">AnyObject</span><span class="p">]?)</span> <span class="o">-&gt;</span> <span class="p">(</span><span class="kt">NSURLRequest</span><span class="p">,</span> <span class="kt">NSError</span><span class="p">?)</span>
    <span class="p">{</span> <span class="o">...</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<ul>
<li><code>URL</code>: A query string to be set as or appended to any existing URL query for <code>GET</code>, <code>HEAD</code>, and <code>DELETE</code> requests, or set as the body for requests with any other HTTP method. The <code>Content-Type</code> HTTP header field of an encoded request with HTTP body is set to <code>application/x-www-form-urlencoded</code>. <em>Since there is no published specification for how to encode collection types, Alamofire follows the convention of appending <code>[]</code> to the key for array values (<code>foo[]=1&amp;foo[]=2</code>), and appending the key surrounded by square brackets for nested dictionary values (<code>foo[bar]=baz</code>).</em></li>
<li><code>URLEncodedInURL</code>: Creates query string to be set as or appended to any existing URL query. Uses the same implementation as the <code>.URL</code> case, but always applies the encoded result to the URL.</li>
<li><code>JSON</code>: Uses <code>NSJSONSerialization</code> to create a JSON representation of the parameters object, which is set as the body of the request. The <code>Content-Type</code> HTTP header field of an encoded request is set to <code>application/json</code>.</li>
<li><code>PropertyList</code>: Uses <code>NSPropertyListSerialization</code> to create a plist representation of the parameters object, according to the associated format and write options values, which is set as the body of the request. The <code>Content-Type</code> HTTP header field of an encoded request is set to <code>application/x-plist</code>.</li>
<li><code>Custom</code>: Uses the associated closure value to construct a new request given an existing request and parameters.</li>
</ul>
<a href='#manual-parameter-encoding-of-an-nsurlrequest' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='manual-parameter-encoding-of-an-nsurlrequest'>Manual Parameter Encoding of an NSURLRequest</h4>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">URL</span> <span class="o">=</span> <span class="kt">NSURL</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="s">"https://httpbin.org/get"</span><span class="p">)</span><span class="o">!</span>
<span class="k">var</span> <span class="nv">request</span> <span class="o">=</span> <span class="kt">NSMutableURLRequest</span><span class="p">(</span><span class="kt">URL</span><span class="p">:</span> <span class="kt">URL</span><span class="p">)</span>

<span class="k">let</span> <span class="nv">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="s">"foo"</span><span class="p">:</span> <span class="s">"bar"</span><span class="p">]</span>
<span class="k">let</span> <span class="nv">encoding</span> <span class="o">=</span> <span class="kt">Alamofire</span><span class="o">.</span><span class="kt">ParameterEncoding</span><span class="o">.</span><span class="kt">URL</span>
<span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">_</span><span class="p">)</span> <span class="o">=</span> <span class="n">encoding</span><span class="o">.</span><span class="nf">encode</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="nv">parameters</span><span class="p">:</span> <span class="n">parameters</span><span class="p">)</span>
</code></pre>
<a href='#post-request-with-json-encoded-parameters' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='post-request-with-json-encoded-parameters'>POST Request with JSON-encoded Parameters</h4>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">parameters</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s">"foo"</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span>
    <span class="s">"bar"</span><span class="p">:</span> <span class="p">[</span>
        <span class="s">"baz"</span><span class="p">:</span> <span class="s">"qux"</span>
    <span class="p">]</span>
<span class="p">]</span>

<span class="kt">Alamofire</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="o">.</span><span class="kt">POST</span><span class="p">,</span> <span class="s">"https://httpbin.org/post"</span><span class="p">,</span> <span class="nv">parameters</span><span class="p">:</span> <span class="n">parameters</span><span class="p">,</span> <span class="nv">encoding</span><span class="p">:</span> <span class="o">.</span><span class="kt">JSON</span><span class="p">)</span>
<span class="c1">// HTTP body: {"foo": [1, 2, 3], "bar": {"baz": "qux"}}</span>
</code></pre>
<a href='#http-headers' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='http-headers'>HTTP Headers</h3>

<p>Adding a custom HTTP header to a <code>Request</code> is supported directly in the global <code>request</code> method. This makes it easy to attach HTTP headers to a <code>Request</code> that can be constantly changing.</p>

<blockquote>
<p>For HTTP headers that do not change, it is recommended to set them on the <code>NSURLSessionConfiguration</code> so they are automatically applied to any <code>NSURLSessionTask</code> created by the underlying <code>NSURLSession</code>.</p>
</blockquote>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">headers</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Basic QWxhZGRpbjpvcGVuIHNlc2FtZQ=="</span><span class="p">,</span>
    <span class="s">"Content-Type"</span><span class="p">:</span> <span class="s">"application/x-www-form-urlencoded"</span>
<span class="p">]</span>

<span class="kt">Alamofire</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="o">.</span><span class="kt">GET</span><span class="p">,</span> <span class="s">"https://httpbin.org/get"</span><span class="p">,</span> <span class="nv">headers</span><span class="p">:</span> <span class="n">headers</span><span class="p">)</span>
         <span class="o">.</span><span class="n">responseJSON</span> <span class="p">{</span> <span class="n">response</span> <span class="k">in</span>
             <span class="nf">debugPrint</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
         <span class="p">}</span>
</code></pre>
<a href='#caching' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='caching'>Caching</h3>

<p>Caching is handled on the system framework level by <a href="https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSURLCache_Class/Reference/Reference.html#//apple_ref/occ/cl/NSURLCache"><code>NSURLCache</code></a>.</p>
<a href='#uploading' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='uploading'>Uploading</h3>

<p><strong>Supported Upload Types</strong></p>

<ul>
<li>File</li>
<li>Data</li>
<li>Stream</li>
<li>MultipartFormData</li>
</ul>
<a href='#uploading-a-file' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='uploading-a-file'>Uploading a File</h4>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">fileURL</span> <span class="o">=</span> <span class="kt">NSBundle</span><span class="o">.</span><span class="nf">mainBundle</span><span class="p">()</span><span class="o">.</span><span class="kt">URLForResource</span><span class="p">(</span><span class="s">"Default"</span><span class="p">,</span> <span class="nv">withExtension</span><span class="p">:</span> <span class="s">"png"</span><span class="p">)</span>
<span class="kt">Alamofire</span><span class="o">.</span><span class="nf">upload</span><span class="p">(</span><span class="o">.</span><span class="kt">POST</span><span class="p">,</span> <span class="s">"https://httpbin.org/post"</span><span class="p">,</span> <span class="nv">file</span><span class="p">:</span> <span class="n">fileURL</span><span class="p">)</span>
</code></pre>
<a href='#uploading-with-progress' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='uploading-with-progress'>Uploading with Progress</h4>
<pre class="highlight swift"><code><span class="kt">Alamofire</span><span class="o">.</span><span class="nf">upload</span><span class="p">(</span><span class="o">.</span><span class="kt">POST</span><span class="p">,</span> <span class="s">"https://httpbin.org/post"</span><span class="p">,</span> <span class="nv">file</span><span class="p">:</span> <span class="n">fileURL</span><span class="p">)</span>
         <span class="o">.</span><span class="n">progress</span> <span class="p">{</span> <span class="n">bytesWritten</span><span class="p">,</span> <span class="n">totalBytesWritten</span><span class="p">,</span> <span class="n">totalBytesExpectedToWrite</span> <span class="k">in</span>
             <span class="nf">print</span><span class="p">(</span><span class="n">totalBytesWritten</span><span class="p">)</span>

             <span class="c1">// This closure is NOT called on the main queue for performance</span>
             <span class="c1">// reasons. To update your ui, dispatch to the main queue.</span>
             <span class="nf">dispatch_async</span><span class="p">(</span><span class="nf">dispatch_get_main_queue</span><span class="p">())</span> <span class="p">{</span>
                 <span class="nf">print</span><span class="p">(</span><span class="s">"Total bytes written on main queue: </span><span class="se">\(</span><span class="n">totalBytesWritten</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
             <span class="p">}</span>
         <span class="p">}</span>
         <span class="o">.</span><span class="n">responseJSON</span> <span class="p">{</span> <span class="n">response</span> <span class="k">in</span>
             <span class="nf">debugPrint</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
         <span class="p">}</span>
</code></pre>
<a href='#uploading-multipartformdata' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='uploading-multipartformdata'>Uploading MultipartFormData</h4>
<pre class="highlight swift"><code><span class="kt">Alamofire</span><span class="o">.</span><span class="nf">upload</span><span class="p">(</span>
    <span class="o">.</span><span class="kt">POST</span><span class="p">,</span>
    <span class="s">"https://httpbin.org/post"</span><span class="p">,</span>
    <span class="nv">multipartFormData</span><span class="p">:</span> <span class="p">{</span> <span class="n">multipartFormData</span> <span class="k">in</span>
        <span class="n">multipartFormData</span><span class="o">.</span><span class="nf">appendBodyPart</span><span class="p">(</span><span class="nv">fileURL</span><span class="p">:</span> <span class="n">unicornImageURL</span><span class="p">,</span> <span class="nv">name</span><span class="p">:</span> <span class="s">"unicorn"</span><span class="p">)</span>
        <span class="n">multipartFormData</span><span class="o">.</span><span class="nf">appendBodyPart</span><span class="p">(</span><span class="nv">fileURL</span><span class="p">:</span> <span class="n">rainbowImageURL</span><span class="p">,</span> <span class="nv">name</span><span class="p">:</span> <span class="s">"rainbow"</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="nv">encodingCompletion</span><span class="p">:</span> <span class="p">{</span> <span class="n">encodingResult</span> <span class="k">in</span>
        <span class="k">switch</span> <span class="n">encodingResult</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">.</span><span class="kt">Success</span><span class="p">(</span><span class="k">let</span> <span class="nv">upload</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">):</span>
            <span class="n">upload</span><span class="o">.</span><span class="n">responseJSON</span> <span class="p">{</span> <span class="n">response</span> <span class="k">in</span>
                <span class="nf">debugPrint</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
            <span class="p">}</span>
        <span class="k">case</span> <span class="o">.</span><span class="kt">Failure</span><span class="p">(</span><span class="k">let</span> <span class="nv">encodingError</span><span class="p">):</span>
            <span class="nf">print</span><span class="p">(</span><span class="n">encodingError</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">)</span>
</code></pre>
<a href='#downloading' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='downloading'>Downloading</h3>

<p><strong>Supported Download Types</strong></p>

<ul>
<li>Request</li>
<li>Resume Data</li>
</ul>
<a href='#downloading-a-file' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='downloading-a-file'>Downloading a File</h4>
<pre class="highlight swift"><code><span class="kt">Alamofire</span><span class="o">.</span><span class="nf">download</span><span class="p">(</span><span class="o">.</span><span class="kt">GET</span><span class="p">,</span> <span class="s">"https://httpbin.org/stream/100"</span><span class="p">)</span> <span class="p">{</span> <span class="n">temporaryURL</span><span class="p">,</span> <span class="n">response</span> <span class="k">in</span>
    <span class="k">let</span> <span class="nv">fileManager</span> <span class="o">=</span> <span class="kt">NSFileManager</span><span class="o">.</span><span class="nf">defaultManager</span><span class="p">()</span>
    <span class="k">let</span> <span class="nv">directoryURL</span> <span class="o">=</span> <span class="n">fileManager</span><span class="o">.</span><span class="kt">URLsForDirectory</span><span class="p">(</span><span class="o">.</span><span class="kt">DocumentDirectory</span><span class="p">,</span> <span class="nv">inDomains</span><span class="p">:</span> <span class="o">.</span><span class="kt">UserDomainMask</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">let</span> <span class="nv">pathComponent</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">suggestedFilename</span>

    <span class="k">return</span> <span class="n">directoryURL</span><span class="o">.</span><span class="kt">URLByAppendingPathComponent</span><span class="p">(</span><span class="n">pathComponent</span><span class="o">!</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>
<a href='#using-the-default-download-destination' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='using-the-default-download-destination'>Using the Default Download Destination</h4>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">destination</span> <span class="o">=</span> <span class="kt">Alamofire</span><span class="o">.</span><span class="kt">Request</span><span class="o">.</span><span class="nf">suggestedDownloadDestination</span><span class="p">(</span><span class="nv">directory</span><span class="p">:</span> <span class="o">.</span><span class="kt">DocumentDirectory</span><span class="p">,</span> <span class="nv">domain</span><span class="p">:</span> <span class="o">.</span><span class="kt">UserDomainMask</span><span class="p">)</span>
<span class="kt">Alamofire</span><span class="o">.</span><span class="nf">download</span><span class="p">(</span><span class="o">.</span><span class="kt">GET</span><span class="p">,</span> <span class="s">"https://httpbin.org/stream/100"</span><span class="p">,</span> <span class="nv">destination</span><span class="p">:</span> <span class="n">destination</span><span class="p">)</span>
</code></pre>
<a href='#downloading-a-file-w-progress' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='downloading-a-file-w-progress'>Downloading a File w/Progress</h4>
<pre class="highlight swift"><code><span class="kt">Alamofire</span><span class="o">.</span><span class="nf">download</span><span class="p">(</span><span class="o">.</span><span class="kt">GET</span><span class="p">,</span> <span class="s">"https://httpbin.org/stream/100"</span><span class="p">,</span> <span class="nv">destination</span><span class="p">:</span> <span class="n">destination</span><span class="p">)</span>
         <span class="o">.</span><span class="n">progress</span> <span class="p">{</span> <span class="n">bytesRead</span><span class="p">,</span> <span class="n">totalBytesRead</span><span class="p">,</span> <span class="n">totalBytesExpectedToRead</span> <span class="k">in</span>
             <span class="nf">print</span><span class="p">(</span><span class="n">totalBytesRead</span><span class="p">)</span>

             <span class="c1">// This closure is NOT called on the main queue for performance</span>
             <span class="c1">// reasons. To update your ui, dispatch to the main queue.</span>
             <span class="nf">dispatch_async</span><span class="p">(</span><span class="nf">dispatch_get_main_queue</span><span class="p">())</span> <span class="p">{</span>
                 <span class="nf">print</span><span class="p">(</span><span class="s">"Total bytes read on main queue: </span><span class="se">\(</span><span class="n">totalBytesRead</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
             <span class="p">}</span>
         <span class="p">}</span>
         <span class="o">.</span><span class="n">response</span> <span class="p">{</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">error</span> <span class="k">in</span>
             <span class="k">if</span> <span class="k">let</span> <span class="nv">error</span> <span class="o">=</span> <span class="n">error</span> <span class="p">{</span>
                 <span class="nf">print</span><span class="p">(</span><span class="s">"Failed with error: </span><span class="se">\(</span><span class="n">error</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
             <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                 <span class="nf">print</span><span class="p">(</span><span class="s">"Downloaded file successfully"</span><span class="p">)</span>
             <span class="p">}</span>
         <span class="p">}</span>
</code></pre>
<a href='#accessing-resume-data-for-failed-downloads' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='accessing-resume-data-for-failed-downloads'>Accessing Resume Data for Failed Downloads</h4>
<pre class="highlight swift"><code><span class="kt">Alamofire</span><span class="o">.</span><span class="nf">download</span><span class="p">(</span><span class="o">.</span><span class="kt">GET</span><span class="p">,</span> <span class="s">"https://httpbin.org/stream/100"</span><span class="p">,</span> <span class="nv">destination</span><span class="p">:</span> <span class="n">destination</span><span class="p">)</span>
         <span class="o">.</span><span class="n">response</span> <span class="p">{</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">_</span> <span class="k">in</span>
             <span class="k">if</span> <span class="k">let</span>
                 <span class="nv">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">,</span>
                 <span class="n">resumeDataString</span> <span class="o">=</span> <span class="kt">NSString</span><span class="p">(</span><span class="nv">data</span><span class="p">:</span> <span class="n">data</span><span class="p">,</span> <span class="nv">encoding</span><span class="p">:</span> <span class="kt">NSUTF8StringEncoding</span><span class="p">)</span>
             <span class="p">{</span>
                 <span class="nf">print</span><span class="p">(</span><span class="s">"Resume Data: </span><span class="se">\(</span><span class="n">resumeDataString</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
             <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                 <span class="nf">print</span><span class="p">(</span><span class="s">"Resume Data was empty"</span><span class="p">)</span>
             <span class="p">}</span>
         <span class="p">}</span>
</code></pre>

<blockquote>
<p>The <code>data</code> parameter is automatically populated with the <code>resumeData</code> if available.</p>
</blockquote>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">download</span> <span class="o">=</span> <span class="kt">Alamofire</span><span class="o">.</span><span class="nf">download</span><span class="p">(</span><span class="o">.</span><span class="kt">GET</span><span class="p">,</span> <span class="s">"https://httpbin.org/stream/100"</span><span class="p">,</span> <span class="nv">destination</span><span class="p">:</span> <span class="n">destination</span><span class="p">)</span>
<span class="n">download</span><span class="o">.</span><span class="n">response</span> <span class="p">{</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="k">in</span>
    <span class="k">if</span> <span class="k">let</span>
        <span class="nv">resumeData</span> <span class="o">=</span> <span class="n">download</span><span class="o">.</span><span class="n">resumeData</span><span class="p">,</span>
        <span class="n">resumeDataString</span> <span class="o">=</span> <span class="kt">NSString</span><span class="p">(</span><span class="nv">data</span><span class="p">:</span> <span class="n">resumeData</span><span class="p">,</span> <span class="nv">encoding</span><span class="p">:</span> <span class="kt">NSUTF8StringEncoding</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nf">print</span><span class="p">(</span><span class="s">"Resume Data: </span><span class="se">\(</span><span class="n">resumeDataString</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nf">print</span><span class="p">(</span><span class="s">"Resume Data was empty"</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<a href='#authentication' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='authentication'>Authentication</h3>

<p>Authentication is handled on the system framework level by <a href="https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSURLAuthenticationChallenge_Class/Reference/Reference.html"><code>NSURLCredential</code> and <code>NSURLAuthenticationChallenge</code></a>.</p>

<p><strong>Supported Authentication Schemes</strong></p>

<ul>
<li><a href="http://en.wikipedia.org/wiki/Basic_access_authentication">HTTP Basic</a></li>
<li><a href="http://en.wikipedia.org/wiki/Digest_access_authentication">HTTP Digest</a></li>
<li><a href="http://en.wikipedia.org/wiki/Kerberos_%28protocol%29">Kerberos</a></li>
<li><a href="http://en.wikipedia.org/wiki/NT_LAN_Manager">NTLM</a></li>
</ul>
<a href='#http-basic-authentication' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='http-basic-authentication'>HTTP Basic Authentication</h4>

<p>The <code>authenticate</code> method on a <code>Request</code> will automatically provide an <code>NSURLCredential</code> to an <code>NSURLAuthenticationChallenge</code> when appropriate:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">user</span> <span class="o">=</span> <span class="s">"user"</span>
<span class="k">let</span> <span class="nv">password</span> <span class="o">=</span> <span class="s">"password"</span>

<span class="kt">Alamofire</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="o">.</span><span class="kt">GET</span><span class="p">,</span> <span class="s">"https://httpbin.org/basic-auth/</span><span class="se">\(</span><span class="n">user</span><span class="se">)</span><span class="s">/</span><span class="se">\(</span><span class="n">password</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
         <span class="o">.</span><span class="nf">authenticate</span><span class="p">(</span><span class="nv">user</span><span class="p">:</span> <span class="n">user</span><span class="p">,</span> <span class="nv">password</span><span class="p">:</span> <span class="n">password</span><span class="p">)</span>
         <span class="o">.</span><span class="n">responseJSON</span> <span class="p">{</span> <span class="n">response</span> <span class="k">in</span>
             <span class="nf">debugPrint</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
         <span class="p">}</span>
</code></pre>

<p>Depending upon your server implementation, an <code>Authorization</code> header may also be appropriate:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">user</span> <span class="o">=</span> <span class="s">"user"</span>
<span class="k">let</span> <span class="nv">password</span> <span class="o">=</span> <span class="s">"password"</span>

<span class="k">let</span> <span class="nv">credentialData</span> <span class="o">=</span> <span class="s">"</span><span class="se">\(</span><span class="n">user</span><span class="se">)</span><span class="s">:</span><span class="se">\(</span><span class="n">password</span><span class="se">)</span><span class="s">"</span><span class="o">.</span><span class="nf">dataUsingEncoding</span><span class="p">(</span><span class="kt">NSUTF8StringEncoding</span><span class="p">)</span><span class="o">!</span>
<span class="k">let</span> <span class="nv">base64Credentials</span> <span class="o">=</span> <span class="n">credentialData</span><span class="o">.</span><span class="nf">base64EncodedStringWithOptions</span><span class="p">([])</span>

<span class="k">let</span> <span class="nv">headers</span> <span class="o">=</span> <span class="p">[</span><span class="s">"Authorization"</span><span class="p">:</span> <span class="s">"Basic </span><span class="se">\(</span><span class="n">base64Credentials</span><span class="se">)</span><span class="s">"</span><span class="p">]</span>

<span class="kt">Alamofire</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="o">.</span><span class="kt">GET</span><span class="p">,</span> <span class="s">"https://httpbin.org/basic-auth/user/password"</span><span class="p">,</span> <span class="nv">headers</span><span class="p">:</span> <span class="n">headers</span><span class="p">)</span>
         <span class="o">.</span><span class="n">responseJSON</span> <span class="p">{</span> <span class="n">response</span> <span class="k">in</span>
             <span class="nf">debugPrint</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
         <span class="p">}</span>
</code></pre>
<a href='#authentication-with-nsurlcredential' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='authentication-with-nsurlcredential'>Authentication with NSURLCredential</h4>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">user</span> <span class="o">=</span> <span class="s">"user"</span>
<span class="k">let</span> <span class="nv">password</span> <span class="o">=</span> <span class="s">"password"</span>

<span class="k">let</span> <span class="nv">credential</span> <span class="o">=</span> <span class="kt">NSURLCredential</span><span class="p">(</span><span class="nv">user</span><span class="p">:</span> <span class="n">user</span><span class="p">,</span> <span class="nv">password</span><span class="p">:</span> <span class="n">password</span><span class="p">,</span> <span class="nv">persistence</span><span class="p">:</span> <span class="o">.</span><span class="kt">ForSession</span><span class="p">)</span>

<span class="kt">Alamofire</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="o">.</span><span class="kt">GET</span><span class="p">,</span> <span class="s">"https://httpbin.org/basic-auth/</span><span class="se">\(</span><span class="n">user</span><span class="se">)</span><span class="s">/</span><span class="se">\(</span><span class="n">password</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
         <span class="o">.</span><span class="nf">authenticate</span><span class="p">(</span><span class="nv">usingCredential</span><span class="p">:</span> <span class="n">credential</span><span class="p">)</span>
         <span class="o">.</span><span class="n">responseJSON</span> <span class="p">{</span> <span class="n">response</span> <span class="k">in</span>
             <span class="nf">debugPrint</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
         <span class="p">}</span>
</code></pre>
<a href='#validation' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='validation'>Validation</h3>

<p>By default, Alamofire treats any completed request to be successful, regardless of the content of the response. Calling <code>validate</code> before a response handler causes an error to be generated if the response had an unacceptable status code or MIME type.</p>
<a href='#manual-validation' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='manual-validation'>Manual Validation</h4>
<pre class="highlight swift"><code><span class="kt">Alamofire</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="o">.</span><span class="kt">GET</span><span class="p">,</span> <span class="s">"https://httpbin.org/get"</span><span class="p">,</span> <span class="nv">parameters</span><span class="p">:</span> <span class="p">[</span><span class="s">"foo"</span><span class="p">:</span> <span class="s">"bar"</span><span class="p">])</span>
         <span class="o">.</span><span class="nf">validate</span><span class="p">(</span><span class="nv">statusCode</span><span class="p">:</span> <span class="mi">200</span><span class="o">..&lt;</span><span class="mi">300</span><span class="p">)</span>
         <span class="o">.</span><span class="nf">validate</span><span class="p">(</span><span class="nv">contentType</span><span class="p">:</span> <span class="p">[</span><span class="s">"application/json"</span><span class="p">])</span>
         <span class="o">.</span><span class="n">response</span> <span class="p">{</span> <span class="n">response</span> <span class="k">in</span>
             <span class="nf">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
         <span class="p">}</span>
</code></pre>
<a href='#automatic-validation' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='automatic-validation'>Automatic Validation</h4>

<p>Automatically validates status code within <code>200...299</code> range, and that the <code>Content-Type</code> header of the response matches the <code>Accept</code> header of the request, if one is provided.</p>
<pre class="highlight swift"><code><span class="kt">Alamofire</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="o">.</span><span class="kt">GET</span><span class="p">,</span> <span class="s">"https://httpbin.org/get"</span><span class="p">,</span> <span class="nv">parameters</span><span class="p">:</span> <span class="p">[</span><span class="s">"foo"</span><span class="p">:</span> <span class="s">"bar"</span><span class="p">])</span>
         <span class="o">.</span><span class="nf">validate</span><span class="p">()</span>
         <span class="o">.</span><span class="n">responseJSON</span> <span class="p">{</span> <span class="n">response</span> <span class="k">in</span>
             <span class="k">switch</span> <span class="n">response</span><span class="o">.</span><span class="n">result</span> <span class="p">{</span>
             <span class="k">case</span> <span class="o">.</span><span class="kt">Success</span><span class="p">:</span>
                 <span class="nf">print</span><span class="p">(</span><span class="s">"Validation Successful"</span><span class="p">)</span>
             <span class="k">case</span> <span class="o">.</span><span class="kt">Failure</span><span class="p">(</span><span class="k">let</span> <span class="nv">error</span><span class="p">):</span>
                 <span class="nf">print</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
             <span class="p">}</span>
         <span class="p">}</span>
</code></pre>
<a href='#timeline' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='timeline'>Timeline</h3>

<p>Alamofire collects timings throughout the lifecycle of a <code>Request</code> and creates a <code>Timeline</code> object exposed as a property on a <code>Response</code>.</p>
<pre class="highlight swift"><code><span class="kt">Alamofire</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="o">.</span><span class="kt">GET</span><span class="p">,</span> <span class="s">"https://httpbin.org/get"</span><span class="p">,</span> <span class="nv">parameters</span><span class="p">:</span> <span class="p">[</span><span class="s">"foo"</span><span class="p">:</span> <span class="s">"bar"</span><span class="p">])</span>
         <span class="o">.</span><span class="nf">validate</span><span class="p">()</span>
         <span class="o">.</span><span class="n">responseJSON</span> <span class="p">{</span> <span class="n">response</span> <span class="k">in</span>
             <span class="nf">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">timeline</span><span class="p">)</span>
         <span class="p">}</span>
</code></pre>

<p>The above reports the following <code>Timeline</code> info:</p>

<ul>
<li><code>Latency</code>: 0.428 seconds</li>
<li><code>Request Duration</code>: 0.428 seconds</li>
<li><code>Serialization Duration</code>: 0.001 seconds</li>
<li><code>Total Duration</code>: 0.429 seconds</li>
</ul>
<a href='#printable' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='printable'>Printable</h3>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">request</span> <span class="o">=</span> <span class="kt">Alamofire</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="o">.</span><span class="kt">GET</span><span class="p">,</span> <span class="s">"https://httpbin.org/ip"</span><span class="p">)</span>

<span class="nf">print</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
<span class="c1">// GET https://httpbin.org/ip (200)</span>
</code></pre>
<a href='#debugprintable' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='debugprintable'>DebugPrintable</h3>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">request</span> <span class="o">=</span> <span class="kt">Alamofire</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="o">.</span><span class="kt">GET</span><span class="p">,</span> <span class="s">"https://httpbin.org/get"</span><span class="p">,</span> <span class="nv">parameters</span><span class="p">:</span> <span class="p">[</span><span class="s">"foo"</span><span class="p">:</span> <span class="s">"bar"</span><span class="p">])</span>

<span class="nf">debugPrint</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>
</code></pre>
<a href='#output-curl' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='output-curl'>Output (cURL)</h4>
<pre class="highlight shell"><code><span class="gp">$ </span>curl -i <span class="se">\</span>
    -H <span class="s2">"User-Agent: Alamofire"</span> <span class="se">\</span>
    -H <span class="s2">"Accept-Encoding: Accept-Encoding: gzip;q=1.0,compress;q=0.5"</span> <span class="se">\</span>
    -H <span class="s2">"Accept-Language: en;q=1.0,fr;q=0.9,de;q=0.8,zh-Hans;q=0.7,zh-Hant;q=0.6,ja;q=0.5"</span> <span class="se">\</span>
    <span class="s2">"https://httpbin.org/get?foo=bar"</span>
</code></pre>

<hr>
<a href='#advanced-usage' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='advanced-usage'>Advanced Usage</h2>

<blockquote>
<p>Alamofire is built on <code>NSURLSession</code> and the Foundation URL Loading System. To make the most of
this framework, it is recommended that you be familiar with the concepts and capabilities of the underlying networking stack.</p>
</blockquote>

<p><strong>Recommended Reading</strong></p>

<ul>
<li><a href="https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/URLLoadingSystem/URLLoadingSystem.html">URL Loading System Programming Guide</a></li>
<li><a href="https://developer.apple.com/library/mac/documentation/Foundation/Reference/NSURLSession_class/Introduction/Introduction.html#//apple_ref/occ/cl/NSURLSession">NSURLSession Class Reference</a></li>
<li><a href="https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSURLCache_Class/Reference/Reference.html#//apple_ref/occ/cl/NSURLCache">NSURLCache Class Reference</a></li>
<li><a href="https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSURLAuthenticationChallenge_Class/Reference/Reference.html">NSURLAuthenticationChallenge Class Reference</a></li>
</ul>
<a href='#manager' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='manager'>Manager</h3>

<p>Top-level convenience methods like <code>Alamofire.request</code> use a shared instance of <code>Alamofire.Manager</code>, which is configured with the default <code>NSURLSessionConfiguration</code>.</p>

<p>As such, the following two statements are equivalent:</p>
<pre class="highlight swift"><code><span class="kt">Alamofire</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="o">.</span><span class="kt">GET</span><span class="p">,</span> <span class="s">"https://httpbin.org/get"</span><span class="p">)</span>
</code></pre>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">manager</span> <span class="o">=</span> <span class="kt">Alamofire</span><span class="o">.</span><span class="kt">Manager</span><span class="o">.</span><span class="n">sharedInstance</span>
<span class="n">manager</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="kt">NSURLRequest</span><span class="p">(</span><span class="kt">URL</span><span class="p">:</span> <span class="kt">NSURL</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="s">"https://httpbin.org/get"</span><span class="p">)</span><span class="o">!</span><span class="p">))</span>
</code></pre>

<p>Applications can create managers for background and ephemeral sessions, as well as new managers that customize the default session configuration, such as for default headers (<code>HTTPAdditionalHeaders</code>) or timeout interval (<code>timeoutIntervalForRequest</code>).</p>
<a href='#creating-a-manager-with-default-configuration' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='creating-a-manager-with-default-configuration'>Creating a Manager with Default Configuration</h4>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">configuration</span> <span class="o">=</span> <span class="kt">NSURLSessionConfiguration</span><span class="o">.</span><span class="nf">defaultSessionConfiguration</span><span class="p">()</span>
<span class="k">let</span> <span class="nv">manager</span> <span class="o">=</span> <span class="kt">Alamofire</span><span class="o">.</span><span class="kt">Manager</span><span class="p">(</span><span class="nv">configuration</span><span class="p">:</span> <span class="n">configuration</span><span class="p">)</span>
</code></pre>
<a href='#creating-a-manager-with-background-configuration' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='creating-a-manager-with-background-configuration'>Creating a Manager with Background Configuration</h4>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">configuration</span> <span class="o">=</span> <span class="kt">NSURLSessionConfiguration</span><span class="o">.</span><span class="nf">backgroundSessionConfigurationWithIdentifier</span><span class="p">(</span><span class="s">"com.example.app.background"</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">manager</span> <span class="o">=</span> <span class="kt">Alamofire</span><span class="o">.</span><span class="kt">Manager</span><span class="p">(</span><span class="nv">configuration</span><span class="p">:</span> <span class="n">configuration</span><span class="p">)</span>
</code></pre>
<a href='#creating-a-manager-with-ephemeral-configuration' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='creating-a-manager-with-ephemeral-configuration'>Creating a Manager with Ephemeral Configuration</h4>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">configuration</span> <span class="o">=</span> <span class="kt">NSURLSessionConfiguration</span><span class="o">.</span><span class="nf">ephemeralSessionConfiguration</span><span class="p">()</span>
<span class="k">let</span> <span class="nv">manager</span> <span class="o">=</span> <span class="kt">Alamofire</span><span class="o">.</span><span class="kt">Manager</span><span class="p">(</span><span class="nv">configuration</span><span class="p">:</span> <span class="n">configuration</span><span class="p">)</span>
</code></pre>
<a href='#modifying-session-configuration' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='modifying-session-configuration'>Modifying Session Configuration</h4>
<pre class="highlight swift"><code><span class="k">var</span> <span class="nv">defaultHeaders</span> <span class="o">=</span> <span class="kt">Alamofire</span><span class="o">.</span><span class="kt">Manager</span><span class="o">.</span><span class="n">sharedInstance</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">configuration</span><span class="o">.</span><span class="kt">HTTPAdditionalHeaders</span> <span class="p">??</span> <span class="p">[:]</span>
<span class="n">defaultHeaders</span><span class="p">[</span><span class="s">"DNT"</span><span class="p">]</span> <span class="o">=</span> <span class="s">"1 (Do Not Track Enabled)"</span>

<span class="k">let</span> <span class="nv">configuration</span> <span class="o">=</span> <span class="kt">NSURLSessionConfiguration</span><span class="o">.</span><span class="nf">defaultSessionConfiguration</span><span class="p">()</span>
<span class="n">configuration</span><span class="o">.</span><span class="kt">HTTPAdditionalHeaders</span> <span class="o">=</span> <span class="n">defaultHeaders</span>

<span class="k">let</span> <span class="nv">manager</span> <span class="o">=</span> <span class="kt">Alamofire</span><span class="o">.</span><span class="kt">Manager</span><span class="p">(</span><span class="nv">configuration</span><span class="p">:</span> <span class="n">configuration</span><span class="p">)</span>
</code></pre>

<blockquote>
<p>This is <strong>not</strong> recommended for <code>Authorization</code> or <code>Content-Type</code> headers. Instead, use <code>URLRequestConvertible</code> and <code>ParameterEncoding</code>, respectively.</p>
</blockquote>
<a href='#request' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='request'>Request</h3>

<p>The result of a <code>request</code>, <code>upload</code>, or <code>download</code> method is an instance of <code>Alamofire.Request</code>. A request is always created using a constructor method from an owning manager, and never initialized directly.</p>

<p>Methods like <code>authenticate</code>, <code>validate</code> and <code>responseData</code> return the caller in order to facilitate chaining.</p>

<p>Requests can be suspended, resumed, and cancelled:</p>

<ul>
<li><code>suspend()</code>: Suspends the underlying task and dispatch queue</li>
<li><code>resume()</code>: Resumes the underlying task and dispatch queue. If the owning manager does not have <code>startRequestsImmediately</code> set to <code>true</code>, the request must call <code>resume()</code> in order to start.</li>
<li><code>cancel()</code>: Cancels the underlying task, producing an error that is passed to any registered response handlers.</li>
</ul>
<a href='#response-serialization' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='response-serialization'>Response Serialization</h3>
<a href='#creating-a-custom-response-serializer' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='creating-a-custom-response-serializer'>Creating a Custom Response Serializer</h4>

<p>Alamofire provides built-in response serialization for strings, JSON, and property lists, but others can be added in extensions on <code>Alamofire.Request</code>.</p>

<p>For example, here&rsquo;s how a response handler using <a href="https://github.com/mattt/Ono">Ono</a> might be implemented:</p>
<pre class="highlight swift"><code><span class="kd">extension</span> <span class="kt">Request</span> <span class="p">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">func</span> <span class="kt">XMLResponseSerializer</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">ResponseSerializer</span><span class="o">&lt;</span><span class="kt">ONOXMLDocument</span><span class="p">,</span> <span class="kt">NSError</span><span class="o">&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kt">ResponseSerializer</span> <span class="p">{</span> <span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">error</span> <span class="k">in</span>
            <span class="k">guard</span> <span class="n">error</span> <span class="o">==</span> <span class="kc">nil</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="o">.</span><span class="kt">Failure</span><span class="p">(</span><span class="n">error</span><span class="o">!</span><span class="p">)</span> <span class="p">}</span>

            <span class="k">guard</span> <span class="k">let</span> <span class="nv">validData</span> <span class="o">=</span> <span class="n">data</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">let</span> <span class="nv">failureReason</span> <span class="o">=</span> <span class="s">"Data could not be serialized. Input data was nil."</span>
                <span class="k">let</span> <span class="nv">error</span> <span class="o">=</span> <span class="kt">Error</span><span class="o">.</span><span class="nf">errorWithCode</span><span class="p">(</span><span class="o">.</span><span class="kt">DataSerializationFailed</span><span class="p">,</span> <span class="nv">failureReason</span><span class="p">:</span> <span class="n">failureReason</span><span class="p">)</span>
                <span class="k">return</span> <span class="o">.</span><span class="kt">Failure</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
            <span class="p">}</span>

            <span class="k">do</span> <span class="p">{</span>
                <span class="k">let</span> <span class="nv">XML</span> <span class="o">=</span> <span class="k">try</span> <span class="kt">ONOXMLDocument</span><span class="p">(</span><span class="nv">data</span><span class="p">:</span> <span class="n">validData</span><span class="p">)</span>
                <span class="k">return</span> <span class="o">.</span><span class="kt">Success</span><span class="p">(</span><span class="kt">XML</span><span class="p">)</span>
            <span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
                <span class="k">return</span> <span class="o">.</span><span class="kt">Failure</span><span class="p">(</span><span class="n">error</span> <span class="k">as</span> <span class="kt">NSError</span><span class="p">)</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="kd">public</span> <span class="kd">func</span> <span class="nf">responseXMLDocument</span><span class="p">(</span><span class="nv">completionHandler</span><span class="p">:</span> <span class="kt">Response</span><span class="o">&lt;</span><span class="kt">ONOXMLDocument</span><span class="p">,</span> <span class="kt">NSError</span><span class="o">&gt;</span> <span class="o">-&gt;</span> <span class="kt">Void</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nf">response</span><span class="p">(</span><span class="nv">responseSerializer</span><span class="p">:</span> <span class="kt">Request</span><span class="o">.</span><span class="kt">XMLResponseSerializer</span><span class="p">(),</span> <span class="nv">completionHandler</span><span class="p">:</span> <span class="n">completionHandler</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<a href='#generic-response-object-serialization' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='generic-response-object-serialization'>Generic Response Object Serialization</h4>

<p>Generics can be used to provide automatic, type-safe response object serialization.</p>
<pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">protocol</span> <span class="kt">ResponseObjectSerializable</span> <span class="p">{</span>
    <span class="nf">init</span><span class="p">?(</span><span class="nv">response</span><span class="p">:</span> <span class="kt">NSHTTPURLResponse</span><span class="p">,</span> <span class="nv">representation</span><span class="p">:</span> <span class="kt">AnyObject</span><span class="p">)</span>
<span class="p">}</span>

<span class="kd">extension</span> <span class="kt">Request</span> <span class="p">{</span>
    <span class="kd">public</span> <span class="kd">func</span> <span class="n">responseObject</span><span class="o">&lt;</span><span class="kt">T</span><span class="p">:</span> <span class="kt">ResponseObjectSerializable</span><span class="o">&gt;</span><span class="p">(</span><span class="nv">completionHandler</span><span class="p">:</span> <span class="kt">Response</span><span class="o">&lt;</span><span class="kt">T</span><span class="p">,</span> <span class="kt">NSError</span><span class="o">&gt;</span> <span class="o">-&gt;</span> <span class="kt">Void</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">responseSerializer</span> <span class="o">=</span> <span class="kt">ResponseSerializer</span><span class="o">&lt;</span><span class="kt">T</span><span class="p">,</span> <span class="kt">NSError</span><span class="o">&gt;</span> <span class="p">{</span> <span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">error</span> <span class="k">in</span>
            <span class="k">guard</span> <span class="n">error</span> <span class="o">==</span> <span class="kc">nil</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="o">.</span><span class="kt">Failure</span><span class="p">(</span><span class="n">error</span><span class="o">!</span><span class="p">)</span> <span class="p">}</span>

            <span class="k">let</span> <span class="nv">JSONResponseSerializer</span> <span class="o">=</span> <span class="kt">Request</span><span class="o">.</span><span class="kt">JSONResponseSerializer</span><span class="p">(</span><span class="nv">options</span><span class="p">:</span> <span class="o">.</span><span class="kt">AllowFragments</span><span class="p">)</span>
            <span class="k">let</span> <span class="nv">result</span> <span class="o">=</span> <span class="kt">JSONResponseSerializer</span><span class="o">.</span><span class="nf">serializeResponse</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span>

            <span class="k">switch</span> <span class="n">result</span> <span class="p">{</span>
            <span class="k">case</span> <span class="o">.</span><span class="kt">Success</span><span class="p">(</span><span class="k">let</span> <span class="nv">value</span><span class="p">):</span>
                <span class="k">if</span> <span class="k">let</span>
                    <span class="nv">response</span> <span class="o">=</span> <span class="n">response</span><span class="p">,</span>
                    <span class="n">responseObject</span> <span class="o">=</span> <span class="kt">T</span><span class="p">(</span><span class="nv">response</span><span class="p">:</span> <span class="n">response</span><span class="p">,</span> <span class="nv">representation</span><span class="p">:</span> <span class="n">value</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="k">return</span> <span class="o">.</span><span class="kt">Success</span><span class="p">(</span><span class="n">responseObject</span><span class="p">)</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="k">let</span> <span class="nv">failureReason</span> <span class="o">=</span> <span class="s">"JSON could not be serialized into response object: </span><span class="se">\(</span><span class="n">value</span><span class="se">)</span><span class="s">"</span>
                    <span class="k">let</span> <span class="nv">error</span> <span class="o">=</span> <span class="kt">Error</span><span class="o">.</span><span class="nf">errorWithCode</span><span class="p">(</span><span class="o">.</span><span class="kt">JSONSerializationFailed</span><span class="p">,</span> <span class="nv">failureReason</span><span class="p">:</span> <span class="n">failureReason</span><span class="p">)</span>
                    <span class="k">return</span> <span class="o">.</span><span class="kt">Failure</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
                <span class="p">}</span>
            <span class="k">case</span> <span class="o">.</span><span class="kt">Failure</span><span class="p">(</span><span class="k">let</span> <span class="nv">error</span><span class="p">):</span>
                <span class="k">return</span> <span class="o">.</span><span class="kt">Failure</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nf">response</span><span class="p">(</span><span class="nv">responseSerializer</span><span class="p">:</span> <span class="n">responseSerializer</span><span class="p">,</span> <span class="nv">completionHandler</span><span class="p">:</span> <span class="n">completionHandler</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<pre class="highlight swift"><code><span class="kd">final</span> <span class="kd">class</span> <span class="kt">User</span><span class="p">:</span> <span class="kt">ResponseObjectSerializable</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">username</span><span class="p">:</span> <span class="kt">String</span>
    <span class="k">let</span> <span class="nv">name</span><span class="p">:</span> <span class="kt">String</span>

    <span class="nf">init</span><span class="p">?(</span><span class="nv">response</span><span class="p">:</span> <span class="kt">NSHTTPURLResponse</span><span class="p">,</span> <span class="nv">representation</span><span class="p">:</span> <span class="kt">AnyObject</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">username</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="kt">URL</span><span class="o">!.</span><span class="n">lastPathComponent</span><span class="o">!</span>
        <span class="k">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">representation</span><span class="o">.</span><span class="nf">valueForKeyPath</span><span class="p">(</span><span class="s">"name"</span><span class="p">)</span> <span class="k">as!</span> <span class="kt">String</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<pre class="highlight swift"><code><span class="kt">Alamofire</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="o">.</span><span class="kt">GET</span><span class="p">,</span> <span class="s">"https://example.com/users/mattt"</span><span class="p">)</span>
         <span class="o">.</span><span class="n">responseObject</span> <span class="p">{</span> <span class="p">(</span><span class="nv">response</span><span class="p">:</span> <span class="kt">Response</span><span class="o">&lt;</span><span class="kt">User</span><span class="p">,</span> <span class="kt">NSError</span><span class="o">&gt;</span><span class="p">)</span> <span class="k">in</span>
             <span class="nf">debugPrint</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
         <span class="p">}</span>
</code></pre>

<p>The same approach can also be used to handle endpoints that return a representation of a collection of objects:</p>
<pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">protocol</span> <span class="kt">ResponseCollectionSerializable</span> <span class="p">{</span>
    <span class="kd">static</span> <span class="kd">func</span> <span class="nf">collection</span><span class="p">(</span><span class="n">response</span> <span class="nv">response</span><span class="p">:</span> <span class="kt">NSHTTPURLResponse</span><span class="p">,</span> <span class="nv">representation</span><span class="p">:</span> <span class="kt">AnyObject</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="k">Self</span><span class="p">]</span>
<span class="p">}</span>

<span class="kd">extension</span> <span class="kt">Alamofire</span><span class="o">.</span><span class="kt">Request</span> <span class="p">{</span>
    <span class="kd">public</span> <span class="kd">func</span> <span class="n">responseCollection</span><span class="o">&lt;</span><span class="kt">T</span><span class="p">:</span> <span class="kt">ResponseCollectionSerializable</span><span class="o">&gt;</span><span class="p">(</span><span class="nv">completionHandler</span><span class="p">:</span> <span class="kt">Response</span><span class="o">&lt;</span><span class="p">[</span><span class="kt">T</span><span class="p">],</span> <span class="kt">NSError</span><span class="o">&gt;</span> <span class="o">-&gt;</span> <span class="kt">Void</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="k">Self</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">responseSerializer</span> <span class="o">=</span> <span class="kt">ResponseSerializer</span><span class="o">&lt;</span><span class="p">[</span><span class="kt">T</span><span class="p">],</span> <span class="kt">NSError</span><span class="o">&gt;</span> <span class="p">{</span> <span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">error</span> <span class="k">in</span>
            <span class="k">guard</span> <span class="n">error</span> <span class="o">==</span> <span class="kc">nil</span> <span class="k">else</span> <span class="p">{</span> <span class="k">return</span> <span class="o">.</span><span class="kt">Failure</span><span class="p">(</span><span class="n">error</span><span class="o">!</span><span class="p">)</span> <span class="p">}</span>

            <span class="k">let</span> <span class="nv">JSONSerializer</span> <span class="o">=</span> <span class="kt">Request</span><span class="o">.</span><span class="kt">JSONResponseSerializer</span><span class="p">(</span><span class="nv">options</span><span class="p">:</span> <span class="o">.</span><span class="kt">AllowFragments</span><span class="p">)</span>
            <span class="k">let</span> <span class="nv">result</span> <span class="o">=</span> <span class="kt">JSONSerializer</span><span class="o">.</span><span class="nf">serializeResponse</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span>

            <span class="k">switch</span> <span class="n">result</span> <span class="p">{</span>
            <span class="k">case</span> <span class="o">.</span><span class="kt">Success</span><span class="p">(</span><span class="k">let</span> <span class="nv">value</span><span class="p">):</span>
                <span class="k">if</span> <span class="k">let</span> <span class="nv">response</span> <span class="o">=</span> <span class="n">response</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="o">.</span><span class="kt">Success</span><span class="p">(</span><span class="kt">T</span><span class="o">.</span><span class="nf">collection</span><span class="p">(</span><span class="nv">response</span><span class="p">:</span> <span class="n">response</span><span class="p">,</span> <span class="nv">representation</span><span class="p">:</span> <span class="n">value</span><span class="p">))</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="k">let</span> <span class="nv">failureReason</span> <span class="o">=</span> <span class="s">"Response collection could not be serialized due to nil response"</span>
                    <span class="k">let</span> <span class="nv">error</span> <span class="o">=</span> <span class="kt">Error</span><span class="o">.</span><span class="nf">errorWithCode</span><span class="p">(</span><span class="o">.</span><span class="kt">JSONSerializationFailed</span><span class="p">,</span> <span class="nv">failureReason</span><span class="p">:</span> <span class="n">failureReason</span><span class="p">)</span>
                    <span class="k">return</span> <span class="o">.</span><span class="kt">Failure</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
                <span class="p">}</span>
            <span class="k">case</span> <span class="o">.</span><span class="kt">Failure</span><span class="p">(</span><span class="k">let</span> <span class="nv">error</span><span class="p">):</span>
                <span class="k">return</span> <span class="o">.</span><span class="kt">Failure</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nf">response</span><span class="p">(</span><span class="nv">responseSerializer</span><span class="p">:</span> <span class="n">responseSerializer</span><span class="p">,</span> <span class="nv">completionHandler</span><span class="p">:</span> <span class="n">completionHandler</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<pre class="highlight swift"><code><span class="kd">final</span> <span class="kd">class</span> <span class="kt">User</span><span class="p">:</span> <span class="kt">ResponseObjectSerializable</span><span class="p">,</span> <span class="kt">ResponseCollectionSerializable</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">username</span><span class="p">:</span> <span class="kt">String</span>
    <span class="k">let</span> <span class="nv">name</span><span class="p">:</span> <span class="kt">String</span>

    <span class="nf">init</span><span class="p">?(</span><span class="nv">response</span><span class="p">:</span> <span class="kt">NSHTTPURLResponse</span><span class="p">,</span> <span class="nv">representation</span><span class="p">:</span> <span class="kt">AnyObject</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">username</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="kt">URL</span><span class="o">!.</span><span class="n">lastPathComponent</span><span class="o">!</span>
        <span class="k">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">representation</span><span class="o">.</span><span class="nf">valueForKeyPath</span><span class="p">(</span><span class="s">"name"</span><span class="p">)</span> <span class="k">as!</span> <span class="kt">String</span>
    <span class="p">}</span>

    <span class="kd">static</span> <span class="kd">func</span> <span class="nf">collection</span><span class="p">(</span><span class="n">response</span> <span class="nv">response</span><span class="p">:</span> <span class="kt">NSHTTPURLResponse</span><span class="p">,</span> <span class="nv">representation</span><span class="p">:</span> <span class="kt">AnyObject</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="kt">User</span><span class="p">]</span> <span class="p">{</span>
        <span class="k">var</span> <span class="nv">users</span><span class="p">:</span> <span class="p">[</span><span class="kt">User</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">if</span> <span class="k">let</span> <span class="nv">representation</span> <span class="o">=</span> <span class="n">representation</span> <span class="k">as?</span> <span class="p">[[</span><span class="kt">String</span><span class="p">:</span> <span class="kt">AnyObject</span><span class="p">]]</span> <span class="p">{</span>
            <span class="k">for</span> <span class="n">userRepresentation</span> <span class="k">in</span> <span class="n">representation</span> <span class="p">{</span>
                <span class="k">if</span> <span class="k">let</span> <span class="nv">user</span> <span class="o">=</span> <span class="kt">User</span><span class="p">(</span><span class="nv">response</span><span class="p">:</span> <span class="n">response</span><span class="p">,</span> <span class="nv">representation</span><span class="p">:</span> <span class="n">userRepresentation</span><span class="p">)</span> <span class="p">{</span>
                    <span class="n">users</span><span class="o">.</span><span class="nf">append</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="n">users</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<pre class="highlight swift"><code><span class="kt">Alamofire</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="o">.</span><span class="kt">GET</span><span class="p">,</span> <span class="s">"http://example.com/users"</span><span class="p">)</span>
         <span class="o">.</span><span class="n">responseCollection</span> <span class="p">{</span> <span class="p">(</span><span class="nv">response</span><span class="p">:</span> <span class="kt">Response</span><span class="o">&lt;</span><span class="p">[</span><span class="kt">User</span><span class="p">],</span> <span class="kt">NSError</span><span class="o">&gt;</span><span class="p">)</span> <span class="k">in</span>
             <span class="nf">debugPrint</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
         <span class="p">}</span>
</code></pre>
<a href='#urlstringconvertible' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='urlstringconvertible'>URLStringConvertible</h3>

<p>Types adopting the <code>URLStringConvertible</code> protocol can be used to construct URL strings, which are then used to construct URL requests. <code>NSString</code>, <code>NSURL</code>, <code>NSURLComponents</code>, and <code>NSURLRequest</code> conform to <code>URLStringConvertible</code> by default, allowing any of them to be passed as <code>URLString</code> parameters to the <code>request</code>, <code>upload</code>, and <code>download</code> methods:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">string</span> <span class="o">=</span> <span class="kt">NSString</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="s">"https://httpbin.org/post"</span><span class="p">)</span>
<span class="kt">Alamofire</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="o">.</span><span class="kt">POST</span><span class="p">,</span> <span class="n">string</span><span class="p">)</span>

<span class="k">let</span> <span class="nv">URL</span> <span class="o">=</span> <span class="kt">NSURL</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="n">string</span><span class="p">)</span><span class="o">!</span>
<span class="kt">Alamofire</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="o">.</span><span class="kt">POST</span><span class="p">,</span> <span class="kt">URL</span><span class="p">)</span>

<span class="k">let</span> <span class="nv">URLRequest</span> <span class="o">=</span> <span class="kt">NSURLRequest</span><span class="p">(</span><span class="kt">URL</span><span class="p">:</span> <span class="kt">URL</span><span class="p">)</span>
<span class="kt">Alamofire</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="o">.</span><span class="kt">POST</span><span class="p">,</span> <span class="kt">URLRequest</span><span class="p">)</span> <span class="c1">// overrides `HTTPMethod` of `URLRequest`</span>

<span class="k">let</span> <span class="nv">URLComponents</span> <span class="o">=</span> <span class="kt">NSURLComponents</span><span class="p">(</span><span class="kt">URL</span><span class="p">:</span> <span class="kt">URL</span><span class="p">,</span> <span class="nv">resolvingAgainstBaseURL</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span>
<span class="kt">Alamofire</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="o">.</span><span class="kt">POST</span><span class="p">,</span> <span class="kt">URLComponents</span><span class="p">)</span>
</code></pre>

<p>Applications interacting with web applications in a significant manner are encouraged to have custom types conform to <code>URLStringConvertible</code> as a convenient way to map domain-specific models to server resources.</p>
<a href='#type-safe-routing' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='type-safe-routing'>Type-Safe Routing</h4>
<pre class="highlight swift"><code><span class="kd">extension</span> <span class="kt">User</span><span class="p">:</span> <span class="kt">URLStringConvertible</span> <span class="p">{</span>
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">baseURLString</span> <span class="o">=</span> <span class="s">"http://example.com"</span>

    <span class="k">var</span> <span class="nv">URLString</span><span class="p">:</span> <span class="kt">String</span> <span class="p">{</span>
        <span class="k">return</span> <span class="kt">User</span><span class="o">.</span><span class="n">baseURLString</span> <span class="o">+</span> <span class="s">"/users/</span><span class="se">\(</span><span class="n">username</span><span class="se">)</span><span class="s">/"</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">user</span> <span class="o">=</span> <span class="kt">User</span><span class="p">(</span><span class="nv">username</span><span class="p">:</span> <span class="s">"mattt"</span><span class="p">)</span>
<span class="kt">Alamofire</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="o">.</span><span class="kt">GET</span><span class="p">,</span> <span class="n">user</span><span class="p">)</span> <span class="c1">// http://example.com/users/mattt</span>
</code></pre>
<a href='#urlrequestconvertible' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='urlrequestconvertible'>URLRequestConvertible</h3>

<p>Types adopting the <code>URLRequestConvertible</code> protocol can be used to construct URL requests. <code>NSURLRequest</code> conforms to <code>URLRequestConvertible</code> by default, allowing it to be passed into <code>request</code>, <code>upload</code>, and <code>download</code> methods directly (this is the recommended way to specify custom HTTP body for individual requests):</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">URL</span> <span class="o">=</span> <span class="kt">NSURL</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="s">"https://httpbin.org/post"</span><span class="p">)</span><span class="o">!</span>
<span class="k">let</span> <span class="nv">mutableURLRequest</span> <span class="o">=</span> <span class="kt">NSMutableURLRequest</span><span class="p">(</span><span class="kt">URL</span><span class="p">:</span> <span class="kt">URL</span><span class="p">)</span>
<span class="n">mutableURLRequest</span><span class="o">.</span><span class="kt">HTTPMethod</span> <span class="o">=</span> <span class="s">"POST"</span>

<span class="k">let</span> <span class="nv">parameters</span> <span class="o">=</span> <span class="p">[</span><span class="s">"foo"</span><span class="p">:</span> <span class="s">"bar"</span><span class="p">]</span>

<span class="k">do</span> <span class="p">{</span>
    <span class="n">mutableURLRequest</span><span class="o">.</span><span class="kt">HTTPBody</span> <span class="o">=</span> <span class="k">try</span> <span class="kt">NSJSONSerialization</span><span class="o">.</span><span class="nf">dataWithJSONObject</span><span class="p">(</span><span class="n">parameters</span><span class="p">,</span> <span class="nv">options</span><span class="p">:</span> <span class="kt">NSJSONWritingOptions</span><span class="p">())</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
    <span class="c1">// No-op</span>
<span class="p">}</span>

<span class="n">mutableURLRequest</span><span class="o">.</span><span class="nf">setValue</span><span class="p">(</span><span class="s">"application/json"</span><span class="p">,</span> <span class="nv">forHTTPHeaderField</span><span class="p">:</span> <span class="s">"Content-Type"</span><span class="p">)</span>

<span class="kt">Alamofire</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="n">mutableURLRequest</span><span class="p">)</span>
</code></pre>

<p>Applications interacting with web applications in a significant manner are encouraged to have custom types conform to <code>URLRequestConvertible</code> as a way to ensure consistency of requested endpoints. Such an approach can be used to abstract away server-side inconsistencies and provide type-safe routing, as well as manage authentication credentials and other state.</p>
<a href='#api-parameter-abstraction' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='api-parameter-abstraction'>API Parameter Abstraction</h4>
<pre class="highlight swift"><code><span class="kd">enum</span> <span class="kt">Router</span><span class="p">:</span> <span class="kt">URLRequestConvertible</span> <span class="p">{</span>
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">baseURLString</span> <span class="o">=</span> <span class="s">"http://example.com"</span>
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">perPage</span> <span class="o">=</span> <span class="mi">50</span>

    <span class="k">case</span> <span class="kt">Search</span><span class="p">(</span><span class="nv">query</span><span class="p">:</span> <span class="kt">String</span><span class="p">,</span> <span class="nv">page</span><span class="p">:</span> <span class="kt">Int</span><span class="p">)</span>

    <span class="c1">// MARK: URLRequestConvertible</span>

    <span class="k">var</span> <span class="nv">URLRequest</span><span class="p">:</span> <span class="kt">NSMutableURLRequest</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">result</span><span class="p">:</span> <span class="p">(</span><span class="nv">path</span><span class="p">:</span> <span class="kt">String</span><span class="p">,</span> <span class="nv">parameters</span><span class="p">:</span> <span class="p">[</span><span class="kt">String</span><span class="p">:</span> <span class="kt">AnyObject</span><span class="p">])</span> <span class="o">=</span> <span class="p">{</span>
            <span class="k">switch</span> <span class="k">self</span> <span class="p">{</span>
            <span class="k">case</span> <span class="o">.</span><span class="kt">Search</span><span class="p">(</span><span class="k">let</span> <span class="nv">query</span><span class="p">,</span> <span class="k">let</span> <span class="nv">page</span><span class="p">)</span> <span class="k">where</span> <span class="n">page</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="nf">return</span> <span class="p">(</span><span class="s">"/search"</span><span class="p">,</span> <span class="p">[</span><span class="s">"q"</span><span class="p">:</span> <span class="n">query</span><span class="p">,</span> <span class="s">"offset"</span><span class="p">:</span> <span class="kt">Router</span><span class="o">.</span><span class="n">perPage</span> <span class="o">*</span> <span class="n">page</span><span class="p">])</span>
            <span class="k">case</span> <span class="o">.</span><span class="kt">Search</span><span class="p">(</span><span class="k">let</span> <span class="nv">query</span><span class="p">,</span> <span class="n">_</span><span class="p">):</span>
                <span class="nf">return</span> <span class="p">(</span><span class="s">"/search"</span><span class="p">,</span> <span class="p">[</span><span class="s">"q"</span><span class="p">:</span> <span class="n">query</span><span class="p">])</span>
            <span class="p">}</span>
        <span class="p">}()</span>

        <span class="k">let</span> <span class="nv">URL</span> <span class="o">=</span> <span class="kt">NSURL</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="kt">Router</span><span class="o">.</span><span class="n">baseURLString</span><span class="p">)</span><span class="o">!</span>
        <span class="k">let</span> <span class="nv">URLRequest</span> <span class="o">=</span> <span class="kt">NSURLRequest</span><span class="p">(</span><span class="kt">URL</span><span class="p">:</span> <span class="kt">URL</span><span class="o">.</span><span class="kt">URLByAppendingPathComponent</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">path</span><span class="p">))</span>
        <span class="k">let</span> <span class="nv">encoding</span> <span class="o">=</span> <span class="kt">Alamofire</span><span class="o">.</span><span class="kt">ParameterEncoding</span><span class="o">.</span><span class="kt">URL</span>

        <span class="k">return</span> <span class="n">encoding</span><span class="o">.</span><span class="nf">encode</span><span class="p">(</span><span class="kt">URLRequest</span><span class="p">,</span> <span class="nv">parameters</span><span class="p">:</span> <span class="n">result</span><span class="o">.</span><span class="n">parameters</span><span class="p">)</span><span class="o">.</span><span class="mi">0</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<pre class="highlight swift"><code><span class="kt">Alamofire</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="kt">Router</span><span class="o">.</span><span class="kt">Search</span><span class="p">(</span><span class="nv">query</span><span class="p">:</span> <span class="s">"foo bar"</span><span class="p">,</span> <span class="nv">page</span><span class="p">:</span> <span class="mi">1</span><span class="p">))</span> <span class="c1">// ?q=foo%20bar&amp;offset=50</span>
</code></pre>
<a href='#crud-amp-authorization' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='crud-amp-authorization'>CRUD &amp; Authorization</h4>
<pre class="highlight swift"><code><span class="kd">enum</span> <span class="kt">Router</span><span class="p">:</span> <span class="kt">URLRequestConvertible</span> <span class="p">{</span>
    <span class="kd">static</span> <span class="k">let</span> <span class="nv">baseURLString</span> <span class="o">=</span> <span class="s">"http://example.com"</span>
    <span class="kd">static</span> <span class="k">var</span> <span class="nv">OAuthToken</span><span class="p">:</span> <span class="kt">String</span><span class="p">?</span>

    <span class="k">case</span> <span class="kt">CreateUser</span><span class="p">([</span><span class="kt">String</span><span class="p">:</span> <span class="kt">AnyObject</span><span class="p">])</span>
    <span class="k">case</span> <span class="kt">ReadUser</span><span class="p">(</span><span class="kt">String</span><span class="p">)</span>
    <span class="k">case</span> <span class="kt">UpdateUser</span><span class="p">(</span><span class="kt">String</span><span class="p">,</span> <span class="p">[</span><span class="kt">String</span><span class="p">:</span> <span class="kt">AnyObject</span><span class="p">])</span>
    <span class="k">case</span> <span class="kt">DestroyUser</span><span class="p">(</span><span class="kt">String</span><span class="p">)</span>

    <span class="k">var</span> <span class="nv">method</span><span class="p">:</span> <span class="kt">Alamofire</span><span class="o">.</span><span class="kt">Method</span> <span class="p">{</span>
        <span class="k">switch</span> <span class="k">self</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">.</span><span class="kt">CreateUser</span><span class="p">:</span>
            <span class="k">return</span> <span class="o">.</span><span class="kt">POST</span>
        <span class="k">case</span> <span class="o">.</span><span class="kt">ReadUser</span><span class="p">:</span>
            <span class="k">return</span> <span class="o">.</span><span class="kt">GET</span>
        <span class="k">case</span> <span class="o">.</span><span class="kt">UpdateUser</span><span class="p">:</span>
            <span class="k">return</span> <span class="o">.</span><span class="kt">PUT</span>
        <span class="k">case</span> <span class="o">.</span><span class="kt">DestroyUser</span><span class="p">:</span>
            <span class="k">return</span> <span class="o">.</span><span class="kt">DELETE</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">var</span> <span class="nv">path</span><span class="p">:</span> <span class="kt">String</span> <span class="p">{</span>
        <span class="k">switch</span> <span class="k">self</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">.</span><span class="kt">CreateUser</span><span class="p">:</span>
            <span class="k">return</span> <span class="s">"/users"</span>
        <span class="k">case</span> <span class="o">.</span><span class="kt">ReadUser</span><span class="p">(</span><span class="k">let</span> <span class="nv">username</span><span class="p">):</span>
            <span class="k">return</span> <span class="s">"/users/</span><span class="se">\(</span><span class="n">username</span><span class="se">)</span><span class="s">"</span>
        <span class="k">case</span> <span class="o">.</span><span class="kt">UpdateUser</span><span class="p">(</span><span class="k">let</span> <span class="nv">username</span><span class="p">,</span> <span class="n">_</span><span class="p">):</span>
            <span class="k">return</span> <span class="s">"/users/</span><span class="se">\(</span><span class="n">username</span><span class="se">)</span><span class="s">"</span>
        <span class="k">case</span> <span class="o">.</span><span class="kt">DestroyUser</span><span class="p">(</span><span class="k">let</span> <span class="nv">username</span><span class="p">):</span>
            <span class="k">return</span> <span class="s">"/users/</span><span class="se">\(</span><span class="n">username</span><span class="se">)</span><span class="s">"</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">// MARK: URLRequestConvertible</span>

    <span class="k">var</span> <span class="nv">URLRequest</span><span class="p">:</span> <span class="kt">NSMutableURLRequest</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">URL</span> <span class="o">=</span> <span class="kt">NSURL</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span> <span class="kt">Router</span><span class="o">.</span><span class="n">baseURLString</span><span class="p">)</span><span class="o">!</span>
        <span class="k">let</span> <span class="nv">mutableURLRequest</span> <span class="o">=</span> <span class="kt">NSMutableURLRequest</span><span class="p">(</span><span class="kt">URL</span><span class="p">:</span> <span class="kt">URL</span><span class="o">.</span><span class="kt">URLByAppendingPathComponent</span><span class="p">(</span><span class="n">path</span><span class="p">))</span>
        <span class="n">mutableURLRequest</span><span class="o">.</span><span class="kt">HTTPMethod</span> <span class="o">=</span> <span class="n">method</span><span class="o">.</span><span class="n">rawValue</span>

        <span class="k">if</span> <span class="k">let</span> <span class="nv">token</span> <span class="o">=</span> <span class="kt">Router</span><span class="o">.</span><span class="kt">OAuthToken</span> <span class="p">{</span>
            <span class="n">mutableURLRequest</span><span class="o">.</span><span class="nf">setValue</span><span class="p">(</span><span class="s">"Bearer </span><span class="se">\(</span><span class="n">token</span><span class="se">)</span><span class="s">"</span><span class="p">,</span> <span class="nv">forHTTPHeaderField</span><span class="p">:</span> <span class="s">"Authorization"</span><span class="p">)</span>
        <span class="p">}</span>

        <span class="k">switch</span> <span class="k">self</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">.</span><span class="kt">CreateUser</span><span class="p">(</span><span class="k">let</span> <span class="nv">parameters</span><span class="p">):</span>
            <span class="k">return</span> <span class="kt">Alamofire</span><span class="o">.</span><span class="kt">ParameterEncoding</span><span class="o">.</span><span class="kt">JSON</span><span class="o">.</span><span class="nf">encode</span><span class="p">(</span><span class="n">mutableURLRequest</span><span class="p">,</span> <span class="nv">parameters</span><span class="p">:</span> <span class="n">parameters</span><span class="p">)</span><span class="o">.</span><span class="mi">0</span>
        <span class="k">case</span> <span class="o">.</span><span class="kt">UpdateUser</span><span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="k">let</span> <span class="nv">parameters</span><span class="p">):</span>
            <span class="k">return</span> <span class="kt">Alamofire</span><span class="o">.</span><span class="kt">ParameterEncoding</span><span class="o">.</span><span class="kt">URL</span><span class="o">.</span><span class="nf">encode</span><span class="p">(</span><span class="n">mutableURLRequest</span><span class="p">,</span> <span class="nv">parameters</span><span class="p">:</span> <span class="n">parameters</span><span class="p">)</span><span class="o">.</span><span class="mi">0</span>
        <span class="k">default</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">mutableURLRequest</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<pre class="highlight swift"><code><span class="kt">Alamofire</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="kt">Router</span><span class="o">.</span><span class="kt">ReadUser</span><span class="p">(</span><span class="s">"mattt"</span><span class="p">))</span> <span class="c1">// GET /users/mattt</span>
</code></pre>
<a href='#security' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='security'>Security</h3>

<p>Using a secure HTTPS connection when communicating with servers and web services is an important step in securing sensitive data. By default, Alamofire will evaluate the certificate chain provided by the server using Apple&rsquo;s built in validation provided by the Security framework. While this guarantees the certificate chain is valid, it does not prevent man-in-the-middle (MITM) attacks or other potential vulnerabilities. In order to mitigate MITM attacks, applications dealing with sensitive customer data or financial information should use certificate or public key pinning provided by the <code>ServerTrustPolicy</code>.</p>
<a href='#servertrustpolicy' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='servertrustpolicy'>ServerTrustPolicy</h4>

<p>The <code>ServerTrustPolicy</code> enumeration evaluates the server trust generally provided by an <code>NSURLAuthenticationChallenge</code> when connecting to a server over a secure HTTPS connection.</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">serverTrustPolicy</span> <span class="o">=</span> <span class="kt">ServerTrustPolicy</span><span class="o">.</span><span class="kt">PinCertificates</span><span class="p">(</span>
    <span class="nv">certificates</span><span class="p">:</span> <span class="kt">ServerTrustPolicy</span><span class="o">.</span><span class="nf">certificatesInBundle</span><span class="p">(),</span>
    <span class="nv">validateCertificateChain</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nv">validateHost</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">)</span>
</code></pre>

<p>There are many different cases of server trust evaluation giving you complete control over the validation process:</p>

<ul>
<li><code>PerformDefaultEvaluation</code>: Uses the default server trust evaluation while allowing you to control whether to validate the host provided by the challenge.</li>
<li><code>PinCertificates</code>: Uses the pinned certificates to validate the server trust. The server trust is considered valid if one of the pinned certificates match one of the server certificates.</li>
<li><code>PinPublicKeys</code>: Uses the pinned public keys to validate the server trust. The server trust is considered valid if one of the pinned public keys match one of the server certificate public keys.</li>
<li><code>DisableEvaluation</code>: Disables all evaluation which in turn will always consider any server trust as valid.</li>
<li><code>CustomEvaluation</code>: Uses the associated closure to evaluate the validity of the server trust thus giving you complete control over the validation process. Use with caution.</li>
</ul>
<a href='#server-trust-policy-manager' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='server-trust-policy-manager'>Server Trust Policy Manager</h4>

<p>The <code>ServerTrustPolicyManager</code> is responsible for storing an internal mapping of server trust policies to a particular host. This allows Alamofire to evaluate each host against a different server trust policy. </p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">serverTrustPolicies</span><span class="p">:</span> <span class="p">[</span><span class="kt">String</span><span class="p">:</span> <span class="kt">ServerTrustPolicy</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s">"test.example.com"</span><span class="p">:</span> <span class="o">.</span><span class="kt">PinCertificates</span><span class="p">(</span>
        <span class="nv">certificates</span><span class="p">:</span> <span class="kt">ServerTrustPolicy</span><span class="o">.</span><span class="nf">certificatesInBundle</span><span class="p">(),</span>
        <span class="nv">validateCertificateChain</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nv">validateHost</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">),</span>
    <span class="s">"insecure.expired-apis.com"</span><span class="p">:</span> <span class="o">.</span><span class="kt">DisableEvaluation</span>
<span class="p">]</span>

<span class="k">let</span> <span class="nv">manager</span> <span class="o">=</span> <span class="kt">Manager</span><span class="p">(</span>
    <span class="nv">serverTrustPolicyManager</span><span class="p">:</span> <span class="kt">ServerTrustPolicyManager</span><span class="p">(</span><span class="nv">policies</span><span class="p">:</span> <span class="n">serverTrustPolicies</span><span class="p">)</span>
<span class="p">)</span>
</code></pre>

<blockquote>
<p>Make sure to keep a reference to the new <code>Manager</code> instance, otherwise your requests will all get cancelled when your <code>manager</code> is deallocated.</p>
</blockquote>

<p>These server trust policies will result in the following behavior:</p>

<ul>
<li><code>test.example.com</code> will always use certificate pinning with certificate chain and host validation enabled thus requiring the following criteria to be met to allow the TLS handshake to succeed:

<ul>
<li>Certificate chain MUST be valid.</li>
<li>Certificate chain MUST include one of the pinned certificates.</li>
<li>Challenge host MUST match the host in the certificate chain&rsquo;s leaf certificate.</li>
</ul></li>
<li><code>insecure.expired-apis.com</code> will never evaluate the certificate chain and will always allow the TLS handshake to succeed.</li>
<li>All other hosts will use the default evaluation provided by Apple.</li>
</ul>
<a href='#subclassing-server-trust-policy-manager' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h5 id='subclassing-server-trust-policy-manager'>Subclassing Server Trust Policy Manager</h5>

<p>If you find yourself needing more flexible server trust policy matching behavior (i.e. wildcarded domains), then subclass the <code>ServerTrustPolicyManager</code> and override the <code>serverTrustPolicyForHost</code> method with your own custom implementation.</p>
<pre class="highlight swift"><code><span class="kd">class</span> <span class="kt">CustomServerTrustPolicyManager</span><span class="p">:</span> <span class="kt">ServerTrustPolicyManager</span> <span class="p">{</span>
    <span class="k">override</span> <span class="kd">func</span> <span class="nf">serverTrustPolicyForHost</span><span class="p">(</span><span class="nv">host</span><span class="p">:</span> <span class="kt">String</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">ServerTrustPolicy</span><span class="p">?</span> <span class="p">{</span>
        <span class="k">var</span> <span class="nv">policy</span><span class="p">:</span> <span class="kt">ServerTrustPolicy</span><span class="p">?</span>

        <span class="c1">// Implement your custom domain matching behavior...</span>

        <span class="k">return</span> <span class="n">policy</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<a href='#validating-the-host' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='validating-the-host'>Validating the Host</h4>

<p>The <code>.PerformDefaultEvaluation</code>, <code>.PinCertificates</code> and <code>.PinPublicKeys</code> server trust policies all take a <code>validateHost</code> parameter. Setting the value to <code>true</code> will cause the server trust evaluation to verify that hostname in the certificate matches the hostname of the challenge. If they do not match, evaluation will fail. A <code>validateHost</code> value of <code>false</code> will still evaluate the full certificate chain, but will not validate the hostname of the leaf certificate.</p>

<blockquote>
<p>It is recommended that <code>validateHost</code> always be set to <code>true</code> in production environments.</p>
</blockquote>
<a href='#validating-the-certificate-chain' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='validating-the-certificate-chain'>Validating the Certificate Chain</h4>

<p>Pinning certificates and public keys both have the option of validating the certificate chain using the <code>validateCertificateChain</code> parameter. By setting this value to <code>true</code>, the full certificate chain will be evaluated in addition to performing a byte equality check against the pinned certficates or public keys. A value of <code>false</code> will skip the certificate chain validation, but will still perform the byte equality check.</p>

<p>There are several cases where it may make sense to disable certificate chain validation. The most common use cases for disabling validation are self-signed and expired certificates. The evaluation would always fail in both of these cases, but the byte equality check will still ensure you are receiving the certificate you expect from the server.</p>

<blockquote>
<p>It is recommended that <code>validateCertificateChain</code> always be set to <code>true</code> in production environments.</p>
</blockquote>
<a href='#app-transport-security' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='app-transport-security'>App Transport Security</h4>

<p>With the addition of App Transport Security (ATS) in iOS 9, it is possible that using a custom <code>ServerTrustPolicyManager</code> with several <code>ServerTrustPolicy</code> objects will have no effect. If you continuously see <code>CFNetwork SSLHandshake failed (-9806)</code> errors, you have probably run into this problem. Apple&rsquo;s ATS system overrides the entire challenge system unless you configure the ATS settings in your app&rsquo;s plist to disable enough of it to allow your app to evaluate the server trust.</p>

<p>If you run into this problem (high probability with self-signed certificates), you can work around this issue by adding the following to your <code>Info.plist</code>.</p>
<pre class="highlight xml"><code><span class="nt">&lt;dict&gt;</span>
    <span class="nt">&lt;key&gt;</span>NSAppTransportSecurity<span class="nt">&lt;/key&gt;</span>
    <span class="nt">&lt;dict&gt;</span>
        <span class="nt">&lt;key&gt;</span>NSExceptionDomains<span class="nt">&lt;/key&gt;</span>
        <span class="nt">&lt;dict&gt;</span>
            <span class="nt">&lt;key&gt;</span>example.com<span class="nt">&lt;/key&gt;</span>
            <span class="nt">&lt;dict&gt;</span>
                <span class="nt">&lt;key&gt;</span>NSExceptionAllowsInsecureHTTPLoads<span class="nt">&lt;/key&gt;</span>
                <span class="nt">&lt;true/&gt;</span>
                <span class="nt">&lt;key&gt;</span>NSExceptionRequiresForwardSecrecy<span class="nt">&lt;/key&gt;</span>
                <span class="nt">&lt;false/&gt;</span>
                <span class="nt">&lt;key&gt;</span>NSIncludesSubdomains<span class="nt">&lt;/key&gt;</span>
                <span class="nt">&lt;true/&gt;</span>
                <span class="c">&lt;!-- Optional: Specify minimum TLS version --&gt;</span>
                <span class="nt">&lt;key&gt;</span>NSTemporaryExceptionMinimumTLSVersion<span class="nt">&lt;/key&gt;</span>
                <span class="nt">&lt;string&gt;</span>TLSv1.2<span class="nt">&lt;/string&gt;</span>
            <span class="nt">&lt;/dict&gt;</span>
        <span class="nt">&lt;/dict&gt;</span>
    <span class="nt">&lt;/dict&gt;</span>
<span class="nt">&lt;/dict&gt;</span>
</code></pre>

<p>Whether you need to set the <code>NSExceptionRequiresForwardSecrecy</code> to <code>NO</code> depends on whether your TLS connection is using an allowed cipher suite. In certain cases, it will need to be set to <code>NO</code>. The <code>NSExceptionAllowsInsecureHTTPLoads</code> MUST be set to <code>YES</code> in order to allow the <code>SessionDelegate</code> to receive challenge callbacks. Once the challenge callbacks are being called, the <code>ServerTrustPolicyManager</code> will take over the server trust evaluation. You may also need to specify the <code>NSTemporaryExceptionMinimumTLSVersion</code> if you&rsquo;re trying to connect to a host that only supports TLS versions less than <code>1.2</code>.</p>

<blockquote>
<p>It is recommended to always use valid certificates in production environments.</p>
</blockquote>
<a href='#network-reachability' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='network-reachability'>Network Reachability</h3>

<p>The <code>NetworkReachabilityManager</code> listens for reachability changes of hosts and addresses for both WWAN and WiFi network interfaces.</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">manager</span> <span class="o">=</span> <span class="kt">NetworkReachabilityManager</span><span class="p">(</span><span class="nv">host</span><span class="p">:</span> <span class="s">"www.apple.com"</span><span class="p">)</span>

<span class="n">manager</span><span class="p">?</span><span class="o">.</span><span class="n">listener</span> <span class="o">=</span> <span class="p">{</span> <span class="n">status</span> <span class="k">in</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"Network Status Changed: </span><span class="se">\(</span><span class="n">status</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">manager</span><span class="p">?</span><span class="o">.</span><span class="nf">startListening</span><span class="p">()</span>
</code></pre>

<blockquote>
<p>Make sure to remember to retain the <code>manager</code> in the above example, or no status changes will be reported.</p>
</blockquote>

<p>There are some important things to remember when using network reachability to determine what to do next.</p>

<ul>
<li><strong>Do NOT</strong> use Reachability to determine if a network request should be sent.

<ul>
<li>You should <strong>ALWAYS</strong> send it.</li>
</ul></li>
<li>When Reachability is restored, use the event to retry failed network requests.

<ul>
<li>Even though the network requests may still fail, this is a good moment to retry them.</li>
</ul></li>
<li>The network reachability status can be useful for determining why a network request may have failed.

<ul>
<li>If a network request fails, it is more useful to tell the user that the network request failed due to being offline rather than a more technical errror, such as <q>request timed out.</q></li>
</ul></li>
</ul>

<blockquote>
<p>It is recommended to check out <a href="https://developer.apple.com/videos/play/wwdc2012-706/">WWDC 2012 Session 706, <q>Networking Best Practices</q></a> for more info.</p>
</blockquote>

<hr>
<a href='#open-rdars' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='open-rdars'>Open Rdars</h2>

<p>The following rdars have some affect on the current implementation of Alamofire.</p>

<ul>
<li><a href="http://www.openradar.me/radar?id=5517037090635776">rdar://21349340</a> - Compiler throwing warning due to toll-free bridging issue in test case</li>
</ul>
<a href='#faq' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='faq'>FAQ</h2>
<a href='#what-39-s-the-origin-of-the-name-alamofire' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='what-39-s-the-origin-of-the-name-alamofire'>What&rsquo;s the origin of the name Alamofire?</h3>

<p>Alamofire is named after the <a href="https://aggie-horticulture.tamu.edu/wildseed/alamofire.html">Alamo Fire flower</a>, a hybrid variant of the Bluebonnet, the official state flower of Texas.</p>

<hr>
<a href='#credits' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='credits'>Credits</h2>

<p>Alamofire is owned and maintained by the <a href="http://alamofire.org">Alamofire Software Foundation</a>. You can follow them on Twitter at <a href="https://twitter.com/AlamofireSF">@AlamofireSF</a> for project updates and releases.</p>
<a href='#security-disclosure' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='security-disclosure'>Security Disclosure</h3>

<p>If you believe you have identified a security vulnerability with Alamofire, you should report it as soon as possible via email to <a href="mailto:security@alamofire.org">security@alamofire.org</a>. Please do not post it to a public issue tracker.</p>
<a href='#license' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='license'>License</h2>

<p>Alamofire is released under the MIT license. See LICENSE for details.</p>

          </section>
        </section>
        <section id="footer">
          <p>&copy; YYYY <a class="link" href="https://nshipster.com/alamofire" target="_blank" rel="external">Alamofire</a>. All rights reserved. (Last updated: YYYY-MM-DD)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ vX.X.X</a>, a <a class="link" href="http://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
